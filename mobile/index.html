<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Badiani Il Barattolo — Iconic Italian Gelato for Retail</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    @font-face {
  font-family: 'SuperGroteskB';
  src: url('fonts/SuperGroteskB-CdMed.woff2') format('woff2'),
       url('fonts/SuperGroteskB-CdMed.woff') format('woff');
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}
    @font-face {
      font-family: 'SuperGroteskA';
      src: url('fonts/SuperGroteskA-Rg[7511].woff2') format('woff2'),
           url('fonts/SuperGroteskA-Rg[7511].woff') format('woff');
      font-weight: normal;
      font-style: normal;
      font-display: swap;
    }

    @font-face {
      font-family: 'SuperGroteskC';
      src: url('fonts/SuperGroteskC-MedLF.otf') format('opentype');
      font-weight: 500;
      font-style: normal;
      font-display: swap;
    }

    /* Digits-only font: use SuperGroteskC just for numbers (0-9) everywhere. */
    @font-face {
      font-family: 'SuperGroteskDigits';
      src: url('fonts/SuperGroteskC-MedLF.otf') format('opentype');
      font-weight: 1 1000;
      font-style: normal;
      unicode-range: U+0030-0039;
      font-display: swap;
    }

    /* Utility class: use SuperGroteskA and force lowercase */
    /* (defined once below after base typography) */

    /* Typography: use SuperGrotesk Regular as the site default
       and SuperGrotesk Medium for titles (forced uppercase). */

    /* Base: all body text uses SuperGrotesk Regular (400) */
    body, html {
      font-family: 'SuperGroteskDigits', 'SuperGroteskA', 'SuperGroteskB';
      font-weight: 400;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* No italic/oblique typography anywhere */
    em, i { font-style: normal; }

    /* Small/caption text inherit the regular font by default.
       Keep a utility class available for explicit lowercase usage. */
    .sga-lower{
      font-family: 'SuperGroteskDigits', 'SuperGroteskA', 'SuperGroteskB';
      text-transform: lowercase;
      letter-spacing: 0.4px;
    }

    /* Titles: use SuperGrotesk Medium and show as uppercase */
    h1, h2, h3, .hero h1, .section-title, .story-title, .card-name, .stat-num, .barattolo-text h2,
    .mission-title, .heritage h2 {
      font-family: 'SuperGroteskDigits', 'SuperGroteskB', 'SuperGroteskA';
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.6px;
    }

    /* If you need to target specific small-text selectors later,
       they will inherit SuperGroteskA from body and can use
       the `.sga-lower` utility for lowercase transform. */

    /* Ensure small/readable copy uses SuperGrotesk Regular explicitly */
    .story-lead,
    .timeline-desc,
    .barattolo-text p,
    .card-description,
    .card-features li,
    .benefit p,
    .contact p,
    .spec-value,
    footer,
    .stat-label,
    .card-sub {
      font-family: 'SuperGroteskDigits', 'SuperGroteskA', 'SuperGroteskB';
      font-weight: 300;
    }

    :root{ 
      --badiani-blue:#1e398d; 
      --badiani-pink:#f067a6; 
      --badiani-yellow:#D8A200; 
      --badiani-cyan:#5B9AAD; 
      --badiani-green:#6F7C4A;
      --badiani-gray:#58595b; 
      --bg-light:#f8f8f8; 
    }
    *{margin:0;padding:0;box-sizing:border-box;}
    html{scroll-behavior:smooth;}

    /* Mobile-first / mobile-only optimizations */
    body, html { cursor: auto; }
    a, button, .card-img, .nav-menu a, .cta-btn, .menu-toggle { cursor: pointer; touch-action: manipulation; }
    * { -webkit-tap-highlight-color: transparent; }

    /* TESTO NEON BE INSPIRED NELL'HEADER - INGRANDITO */
    .neon-text{
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      font-size: 22px;
      font-weight: 700;
      letter-spacing: 5px;
      text-transform: uppercase;
      color: #fff;
      cursor: pointer;
      text-shadow: 
        0 0 10px rgba(253,185,19,0.8),
        0 0 20px rgba(253,185,19,0.6),
        0 0 30px rgba(240,103,166,0.4),
        0 0 40px rgba(240,103,166,0.2);
      animation: neonPulse 2s ease-in-out infinite;
      user-select: none;
      white-space: nowrap;
    }
    @keyframes neonPulse {
      0%, 100% { 
        text-shadow: 
          0 0 10px rgba(253,185,19,0.8),
          0 0 20px rgba(253,185,19,0.6),
          0 0 30px rgba(240,103,166,0.4),
          0 0 40px rgba(240,103,166,0.2);
      }
      50% { 
        text-shadow: 
          0 0 20px rgba(253,185,19,1),
          0 0 30px rgba(253,185,19,0.8),
          0 0 40px rgba(240,103,166,0.6),
          0 0 50px rgba(240,103,166,0.4);
      }
    }
    .neon-text:hover{
      text-shadow: 
        0 0 20px rgba(253,185,19,1),
        0 0 30px rgba(253,185,19,0.8),
        0 0 40px rgba(240,103,166,0.6),
        0 0 50px rgba(240,103,166,0.4),
        0 0 60px rgba(240,103,166,0.3);
    }

    /* CUSTOMIZER MODAL */
    .customizer-modal{
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.85);
      backdrop-filter: blur(10px);
      z-index: 10001;
      display: none;
      opacity: 0;
      transition: opacity 0.4s ease;
      overflow-y: auto;
      padding: 20px;
    }
    .customizer-modal.active{
      display: flex;
      opacity: 1;
      align-items: center;
      justify-content: center;
    }
    .customizer-content{
      background: linear-gradient(135deg, #fff 0%, #f8f8f8 100%);
      border-radius: 30px;
      padding: 40px 30px;
      max-width: 500px;
      width: 100%;
      box-shadow: 0 20px 60px rgba(0,0,0,0.5);
      position: relative;
      animation: slideUp 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
      margin: auto;
    }
    @keyframes slideUp{
      from{ transform: translateY(50px); opacity: 0; }
      to{ transform: translateY(0); opacity: 1; }
    }
    /* Use the same close button style as Specs (see .specs-close-btn below)
       but position it inside the customizer card */
    .customizer-content .specs-close-btn{
      position: absolute;
      top: 15px;
      right: 15px;
    }
    .customizer-title{
      font-size: 32px;
      color: var(--badiani-blue);
      text-align: center;
      margin-bottom: 12px;
      text-transform: uppercase;
      letter-spacing: 2px;
      font-weight: 700;
    }
    .customizer-subtitle{
      font-size: 16px;
      color: var(--badiani-gray);
      text-align: center;
      margin-bottom: 30px;
      font-style: normal;
    }
    .flavor-selector{
      margin-bottom: 30px;
    }
    .flavor-label{
      font-size: 16px;
      color: var(--badiani-blue);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 14px;
      display: block;
    }
    .flavor-options{
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
    }
    .flavor-option{
      border: 3px solid transparent;
      border-radius: 15px;
      padding: 15px 10px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      background: #fff;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .flavor-option:hover{
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    }
    .flavor-option.selected{
      border-color: var(--badiani-pink);
      box-shadow: 0 8px 25px rgba(240,103,166,0.4);
    }
    .flavor-circle{
      width: 50px;
      height: 50px;
      border-radius: 50%;
      margin: 0 auto 8px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    .flavor-name{
      font-size: 15px;
      color: var(--badiani-gray);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .preview-section{
      background: linear-gradient(135deg, var(--badiani-blue), var(--badiani-pink));
      padding: 20px;
      border-radius: 20px;
      text-align: center;
      margin-top: 20px;
    }
    .preview-title{
      color: #fff;
      font-size: 16px;
      text-transform: uppercase;
      letter-spacing: 2px;
      margin-bottom: 15px;
      font-weight: 600;
    }
    .cursor-preview{
      background: rgba(255,255,255,0.2);
      backdrop-filter: blur(5px);
      padding: 20px;
      border-radius: 15px;
      display: inline-block;
    }

    body{
      font-family: 'SuperGroteskDigits', 'SuperGroteskA', 'SuperGroteskB';
      background:var(--bg-light); 
      color:var(--badiani-gray); 
      line-height:1.6;
    }

    .header-wrapper{ position:sticky; top:0; z-index:1000; box-shadow:0 2px 10px rgba(0,0,0,0.1); }
    header{ background:var(--badiani-blue); padding:18px 40px; display:flex; align-items:center; justify-content:space-between; position:relative; }
    .logo-link{ display:flex; align-items:center; text-decoration:none; }
    .logo-img{ height:63px; width:auto; object-fit:contain; filter: invert(1) grayscale(1) brightness(200%); mix-blend-mode: screen; }
    .nav-menu{ display:flex; gap:35px; align-items:center; }
    .nav-menu a{ color:#fff; text-decoration:none; font-size:16px; letter-spacing:2px; text-transform:uppercase; transition:all 0.3s; padding:12px 20px; border-radius:25px; font-weight:500; }
    .nav-menu a:hover{ background:var(--badiani-pink); transform:translateY(-2px); }

    .pink-banner{ background:var(--badiani-pink); color:#fff; padding:12px 20px 16px; text-align:center; font-size:15px; letter-spacing:2px; text-transform:uppercase; font-weight:500; line-height:1.5; transition:opacity 0.3s; overflow:hidden; }
    .pink-banner p,
    .pink-banner #bannerCurrent{ 
      margin:3px 0; 
      min-height:18px; 
      /* force lowercase and use SuperGrotesk Regular */
      text-transform: lowercase;
      font-family: 'SuperGroteskDigits', 'SuperGroteskA', 'SuperGroteskB', sans-serif;
      font-weight: 400;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* Continuous ticker inside pink banner */
    .banner-ticker{ width:100%; }
    .banner-ticker__viewport{ overflow:hidden; width:100%; }
    .banner-ticker__track{
      display:inline-flex;
      align-items:center;
      white-space:nowrap;
      will-change:transform;
      animation: bannerTicker var(--banner-ticker-duration, 38s) linear infinite;
    }
    .banner-ticker__sequence{ display:inline-flex; align-items:center; }
    .banner-item{ font-size:1.1em; }
    .banner-sep{ padding:0 0.6rem; opacity:0.95; }

    @keyframes bannerTicker{
      from{ transform: translateX(0); }
      to{ transform: translateX(-50%); }
    }

    @media (prefers-reduced-motion: reduce){
      .banner-ticker__track{ animation: none; transform: none; }
    }

    @media (prefers-reduced-motion: reduce){
      .global-presence-bg img{ transition: none !important; }
      .global-presence-headline{ transition: none !important; }
      .global-presence::before,
      .global-presence::after{ transition: none !important; }
      .global-presence-scroll-hint{ transition: none !important; }
    }
    /* single-line banner: #bannerNext removed */

    .section-divider{
      background:linear-gradient(135deg, var(--badiani-pink) 0%, #ff7ab7 100%);
      color:#fff;
      padding:14px 20px;
      text-align:center;
      font-family:'SuperGroteskDigits', 'SuperGroteskA', sans-serif;
      font-size:14px;
      letter-spacing:2px;
      text-transform:none;
      box-shadow:0 2px 8px rgba(240,103,166,0.3);
      font-weight:400;
      transition:all 0.5s ease;
      display: none;
    }
    .section-divider.visible{ display:block; }

    /* Linee divisorie rosa tra le sezioni */
    section:not(#hero) {
      border-top: 2px solid rgba(240,103,166,0.4);
    }
    section#mission {
      border-top: none;
    }
    section#gallery {
      border-top: none;
    }

    /* HERO - TITOLO PIÃ™ IN ALTO */
    .hero{ position:relative; height:550px; overflow:hidden; display:flex; align-items:flex-start; justify-content:center; text-align:center; color:#fff; padding-top:80px; }
    .hero-bg{ 
        position:absolute; 
        top:0;left:0;right:0;bottom:0; 
      background-image:url('assets/extracted/a7a56600066a6e356fdf55d5683807c4328d597b.webp');
        background-size:cover;
        background-position: center center;
        filter:brightness(0.32);
        transition: filter 0.8s cubic-bezier(0.4, 0, 0.2, 1), transform 1.2s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .hero:hover .hero-bg{
        filter:brightness(1) saturate(1.1);
        transform: scale(1.05);
    }
    .hero-content{ position:absolute; top:0; left:50%; transform:translateX(-50%); z-index:2; width:100%; max-width:900px; padding:80px 20px 20px; transition: opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1), transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), filter 0.6s ease; }
    .hero:hover .hero-content{
        opacity: 0;
        transform: translateY(-30px) scale(0.95);
        filter: blur(10px);
        pointer-events: none;
    }
    .hero h1{ font-family:'SuperGroteskDigits', 'SuperGroteskB'; font-size:72px; font-weight:700; letter-spacing:5px; text-transform:uppercase; margin-bottom:18px; }
    .hero h1 span{ color:var(--badiani-pink); font-style:normal; }
    .hero .hero-subtitle{ font-family:'SuperGroteskC', 'SuperGroteskA', 'SuperGroteskB', sans-serif; font-size:30px; margin-bottom:15px; font-style:normal; font-weight:500; letter-spacing:1.5px; text-transform:uppercase; font-variant-caps:normal; }
    .hero p{ font-size:28px; line-height:1.9; font-weight:300; }

    /* SEZIONE STORIA CON SFONDO FIRENZE */
    .buontalenti-story{
        position: relative;
        overflow: hidden;
        background-color: #fff;
        padding:80px 20px;
    }
    .buontalenti-story::before {
        content: "";
        position: absolute;
        inset: 0;
      background-image: url('assets/extracted/5a21d37ff7aad42e4cbf72325d7f2285026d0fda.webp');
        background-size: cover;
        background-repeat: no-repeat;
        background-position: center;
        opacity: 0.20;
        pointer-events: none;
        z-index: 0;
    }

    .heritage, .products, .contact {
        position: relative;
        overflow: hidden;
        background-color: #fff;
    }
    .heritage::before, .products::before, .contact::before {
        content: "";
        position: absolute;
        inset: 0;
      background-image: url('assets/extracted/1b2a5cc62945aea094a8e00e488dd08378eef958.webp');
        background-size: cover;
        background-repeat: no-repeat;
        background-position: center;
        opacity: 0.25;
        pointer-events: none;
        z-index: 0;
    }

    .story-inner{ max-width:1200px; margin:0 auto; position:relative; z-index:1; }
    .story-header{ text-align:center; margin-bottom:50px; }
    .story-title{ position:relative; display:inline-block; padding-left:50px; font-size:54px; letter-spacing:1px; text-transform:uppercase; color:var(--badiani-blue); margin-bottom:25px; font-weight:700; }
    .story-title::before{ content:''; position:absolute; left:0; top:50%; transform:translateY(-50%); width:40px; height:40px; background:var(--badiani-pink); border-radius:3px; }
    .story-lead{ font-size:22px; margin-bottom:40px; line-height:1.9; max-width:900px; margin-left:auto; margin-right:auto; font-weight:300; }
    .highlight-pink{ background:var(--badiani-pink); color:#fff; padding:3px 10px; font-family:'SuperGroteskC', 'SuperGroteskA', 'SuperGroteskB', sans-serif; font-weight:500; border-radius:3px; white-space:nowrap; text-transform:uppercase; font-variant-caps:normal; }

    /* Make only the “20%” text 20% bigger without affecting the whole sentence */
    .percent-boost{ font-size:1.2em; font-weight:600; white-space:nowrap; }

    .story-timeline{ display:grid; grid-template-columns:repeat(3, 1fr); gap:40px; margin-top:50px; }
    .timeline-item{ padding:45px 35px; background:#fff; border-radius:20px; box-shadow:0 10px 40px rgba(0,0,0,0.1); transition:all 0.4s; border-left:6px solid var(--badiani-pink); }
    .timeline-item:nth-child(1){ border-left-color:var(--badiani-blue); }
    .timeline-item:nth-child(2){ border-left-color:var(--badiani-pink); }
    .timeline-item:nth-child(3){ border-left-color:var(--badiani-yellow); }
    @media (hover:hover) and (pointer:fine){
      .timeline-item:hover{ transform:translateY(-10px); box-shadow:0 20px 60px rgba(240,103,166,0.3); }
    }
    .timeline-year{ font-size:48px; font-weight:700; color:var(--badiani-pink); margin-bottom:18px; letter-spacing:2px; font-family:'SuperGroteskC', 'SuperGroteskDigits', 'SuperGroteskB', 'SuperGroteskA', sans-serif; }
    .timeline-item:nth-child(1) .timeline-year{ color:var(--badiani-blue); }
    .timeline-item:nth-child(2) .timeline-year{ color:var(--badiani-pink); }
    .timeline-item:nth-child(3) .timeline-year{ color:var(--badiani-yellow); }
    .timeline-title{ font-size:24px; font-weight:600; color:var(--badiani-blue); margin-bottom:18px; text-transform:uppercase; letter-spacing:1px; }
    .timeline-desc{ font-size:19px; line-height:1.9; color:var(--badiani-gray); font-weight:300; }

    .mission-vision{ padding:0; display:grid; grid-template-columns:1fr 1fr; }
    .mission-box, .vision-box{ padding:70px 45px; color:#fff; min-height:480px; display:flex; flex-direction:column; justify-content:center; position:relative; overflow:hidden; }
    .mission-box{ background:linear-gradient(135deg, var(--badiani-blue), #2a4ab0); }
    .vision-box{ background:linear-gradient(135deg, var(--badiani-pink), #ff7ab7); }
    .mission-box::before, .vision-box::before{ content:""; position:absolute; inset:-20px; background-size:cover; background-position:center; opacity:0.18; pointer-events:none; transition: transform 0.5s ease, opacity 0.5s ease; }
    .mission-box:hover::before, .vision-box:hover::before{ transform: scale(1.06); opacity:0.28; }

    /* Only these two strong lines should always use SuperGroteskC */
    .mission-box p strong,
    .vision-box p strong{
      font-family:'SuperGroteskDigits', 'SuperGroteskC', 'SuperGroteskA', 'SuperGroteskB', sans-serif;
      font-weight:500;
      text-transform:uppercase;
    }
    .mission-box::before{ background-image:url('mission.webp'); }
    .vision-box::before{ background-image:url('vision.webp'); }
    .mission-box > *, .vision-box > *{ position:relative; z-index:1; }
    .mission-box h2, .vision-box h2{ font-size:48px; letter-spacing:3px; text-transform:uppercase; margin-bottom:25px; font-weight:700; text-shadow:2px 2px 8px rgba(0,0,0,0.3); }
    .mission-box p, .vision-box p{ font-size:24px; line-height:1.9; font-weight:300; text-shadow:1px 1px 4px rgba(0,0,0,0.3); }

    .heritage{ padding:70px 20px; text-align:center; }
    .heritage > *{ position:relative; z-index:1; }
    .heritage h2{ position:relative; display:inline-block; padding-left:50px; font-size:54px; letter-spacing:1px; text-transform:uppercase; color:var(--badiani-blue); margin-bottom:25px; font-weight:700; }
    .heritage h2::before{ content:''; position:absolute; left:0; top:50%; transform:translateY(-50%); width:40px; height:40px; background:var(--badiani-blue); border-radius:3px; }
    .heritage-intro{ max-width:950px; margin:0 auto 45px; font-size:20px; line-height:1.9; font-weight:300; }
    .stats{ display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:25px; max-width:1150px; margin:0 auto; }
    .stat{ background:var(--badiani-blue); color:#fff; padding:25px 50px; border-radius:20px; transition:transform 0.3s; min-height:90px; display:flex; flex-direction:column; align-items:center; justify-content:center; }
    .stat:hover{ transform:translateY(-5px); }
    .stat:nth-child(2){ background:var(--badiani-pink); }
    .stat:nth-child(3){ background:var(--badiani-yellow); color:#fff; }
    .stat:nth-child(4){ background:var(--badiani-cyan); color:#fff; }
    .stat-num{ font-size:54px; font-weight:700; margin-bottom:12px; }
    .stat-label{ font-size:16px; text-transform:uppercase; letter-spacing:2px; opacity:0.95; font-weight:500; }

    .global-presence{ width:100%; padding:0; line-height:1; background:#1f4495; position:relative; aspect-ratio: 8 / 3; overflow:hidden; }
    /* Media layer for Locations: use a real <img> so horizontal scroll works on mobile */
    .global-presence-bg{ position:absolute; inset:0; overflow:hidden; z-index:0; }
    .global-presence-bg img{
      position:relative;
      top:0;
      left:0;
      transform:none;
      width:100%;
      height:100%;
      object-fit:cover;
      object-position:center;
      display:block;
      user-select:none;
      -webkit-user-drag:none;
      pointer-events:none;
      will-change: transform, left, top, width, height;
      transition:
        width 0.65s cubic-bezier(0.34, 1.56, 0.64, 1),
        left 0.65s cubic-bezier(0.34, 1.56, 0.64, 1),
        transform 0.65s cubic-bezier(0.34, 1.56, 0.64, 1),
        top 0.65s cubic-bezier(0.34, 1.56, 0.64, 1),
        height 0.65s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .global-presence::after{ content:""; position:absolute; bottom:0; left:0; right:0; height:40%; background:linear-gradient(to bottom, transparent 0%, #1f4495 100%); pointer-events:none; z-index:1; }
    /* Darken only the top area of the image for title readability */
    .global-presence::before{
      content:"";
      position:absolute;
      top:0;
      left:0;
      right:0;
      height:28%;
      background:linear-gradient(to bottom, rgba(0,0,0,0.35) 0%, rgba(0,0,0,0.00) 100%);
      z-index:2;
      pointer-events:none;
    }
    /* Hide legacy images if any were previously injected (we now render the bg via .global-presence-bg img) */
    .global-presence > img{ display:none; }
    .global-presence-headline{ position:absolute; top:7%; left:0; right:0; text-align:center; z-index:3; padding:0 18px; }

    .global-presence-scroll-hint{
      position:absolute;
      left:50%;
      top:14px;
      bottom:auto;
      transform:translateX(-50%);
      background:rgba(0,0,0,0.55);
      color:#fff;
      padding:8px 14px;
      border-radius:999px;
      font-size:11px;
      letter-spacing:1px;
      text-transform:uppercase;
      opacity:0;
      transition:opacity 0.25s ease;
      pointer-events:none;
      z-index:4;
      white-space:nowrap;
      max-width:calc(100% - 24px);
      text-align:center;
    }

    /* Reference-style title: “BADIANI AROUND THE WORLD / MEANS / GELATO” */
    .global-presence-headline .world-means-title{
      margin:0;
      color:#fff;
      text-transform:uppercase;
      line-height:0.95;
      text-shadow:2px 2px 10px rgba(0,0,0,0.25);
    }
    .global-presence-headline .world-means-title .wmt-top{
      display:block;
      font-family:'SuperGroteskDigits', 'SuperGroteskB', 'SuperGroteskA', sans-serif;
      font-weight:700;
      font-size:clamp(18px, 3.24vw, 45.6px);
      letter-spacing:0.08em;
    }
    .global-presence-headline .world-means-title .wmt-mid{
      display:block;
      margin-top:14px;
      font-family:'SuperGroteskDigits', 'SuperGroteskA', 'SuperGroteskB', sans-serif;
      font-weight:400;
      font-size:clamp(12px, 1.56vw, 30px);
      letter-spacing:0.24em;
      opacity:0.92;
    }
    .global-presence-headline .world-means-title .wmt-bottom{
      display:block;
      margin-top:10px;
      font-family:'SuperGroteskDigits', 'SuperGroteskB', 'SuperGroteskA', sans-serif;
      font-weight:800;
      font-size:clamp(56.16px, 9.828vw, 152.88px);
      letter-spacing:0.06em;
    }

    /* Interactive state for global-presence */
    .global-presence {
      transition: background-size 0.6s cubic-bezier(0.34, 1.56, 0.64, 1), background-position 0.6s cubic-bezier(0.34, 1.56, 0.64, 1), overflow 0.6s ease;
    }
    .global-presence.is-expanded {
      overflow: hidden;
      cursor: grab;
      padding-bottom: 0;
      -webkit-overflow-scrolling: touch;
    }
    .global-presence.is-expanded .global-presence-bg{ overflow-x:auto; overflow-y:hidden; -webkit-overflow-scrolling:touch; scrollbar-width:none; }
    .global-presence.is-expanded .global-presence-bg::-webkit-scrollbar{ display:none; }
    .global-presence.is-expanded .global-presence-bg img{
      top:-55%;
      left:0;
      transform:none;
      width:250%;
      height:155%;
      pointer-events:none;
    }
    .global-presence-headline {
      transition: opacity 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
      opacity: 1;
    }
    .global-presence.is-expanded .global-presence-headline {
      opacity: 0;
      pointer-events: none;
    }
    .global-presence.is-expanded .global-presence-scroll-hint{ opacity:1; }
    .global-presence::before {
      transition: opacity 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .global-presence::after {
      transition: opacity 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .global-presence.is-expanded::before {
      opacity: 0;
    }
    .global-presence.is-expanded::after {
      opacity: 0;
    }

    /* BARATTOLO SHOWCASE - Full width video separator */
    .barattolo-showcase{ width:100%; padding:0; line-height:0; background:#000; overflow:hidden; }
    .barattolo-showcase video{ width:100%; height:auto; display:block; object-fit:cover; }

    /* BARATTOLO INTRO CON SFONDO CALLIGRAFICO */
    .barattolo-intro{ 
      background: #3d4f8f url('assets/barattolo-tab.webp?v=20251222') center/cover no-repeat; 
      padding:0; 
      text-align:left; 
      position:relative; 
      overflow:hidden; 
      color:#fff;
    }
    .barattolo-intro::before{ 
      content:""; 
      position:absolute; 
      inset:0; 
      background:rgba(61,79,143,0.5);
      z-index:0;
    }
    .barattolo-intro > * {
      position: relative;
      z-index: 2;
    }
    /* Let the video column auto-size from the video's aspect ratio when height is 100% */
    .barattolo-intro-content{ max-width:1200px; margin:0 auto; display:grid; grid-template-columns:auto 1fr; gap:80px; align-items:stretch; text-align:left; padding:0 20px; }
    .barattolo-image-pila{ position:relative; width:auto; min-width:220px; max-width:420px; display:flex; align-items:stretch; justify-content:center; overflow:hidden; background:rgba(0,0,0,0.18); }

    /* Subtle overlay so any letterboxing looks like part of the background */
    .barattolo-image-pila::after{
      content:"";
      position:absolute;
      inset:0;
      pointer-events:none;
      background:linear-gradient(180deg, rgba(0,0,0,0.10) 0%, rgba(0,0,0,0.00) 35%, rgba(0,0,0,0.12) 100%);
      z-index:1;
    }
    .barattolo-image-pila img, .barattolo-image-pila video{ width:100%; border-radius:15px; box-shadow:0 15px 50px rgba(0,0,0,0.2); transition:transform 0.4s ease; display:block; }
    .barattolo-image-pila img{ height:auto; border:6px solid #fff; }
    /* Video: full visible frame (no crop) inside a tall vertical strip */
    .barattolo-image-pila video{
      display:block;
      width:auto;
      height:100%;
      max-width:100%;
      object-fit:contain;
      object-position:center -20px;
      border:0;
      border-radius:0;
      box-shadow:none;
      transform:none;
      position:relative;
      z-index:0;
    }
    @media (hover:hover) and (pointer:fine){
      .barattolo-image-pila:hover img{ transform:scale(1.05); }
    }
    .barattolo-text{ text-align:left; color:#fff; display:flex; flex-direction:column; justify-content:center; padding:90px 0; }
    .barattolo-text h2{ position:relative; display:inline-block; padding-left:0; font-size:50px; letter-spacing:1px; text-transform:uppercase; color:#fff; margin-bottom:22px; font-weight:700; text-shadow:2px 2px 8px rgba(0,0,0,0.2); }
    .barattolo-text h2 span{ color:var(--badiani-pink); font-style:normal; }
    .barattolo-text p{ font-size:19px; line-height:1.9; margin-bottom:18px; font-weight:400; text-shadow:1px 1px 3px rgba(0,0,0,0.2); }
    .barattolo-text .highlight-pink{ background:var(--badiani-pink); color:#fff; padding:2px 6px; border-radius:3px; font-family:'SuperGroteskC', 'SuperGroteskA', 'SuperGroteskB', sans-serif; font-weight:500; text-transform:uppercase; font-variant-caps:normal; }
    .barattolo-text strong{ color:#fff; font-weight:600; }

    .products{ padding:90px 20px; }
    .products > *{ position:relative; z-index:1; }
    .section-title{ position:relative; display:inline-block; padding-left:50px; font-size:54px; letter-spacing:1px; text-transform:uppercase; color:var(--badiani-blue); margin-bottom:25px; text-align:center; font-weight:700; }
    .section-title::before{ content:''; position:absolute; left:0; top:50%; transform:translateY(-50%); width:40px; height:40px; background:var(--badiani-cyan); border-radius:3px; }
    .section-title span{ color:var(--badiani-pink); font-style:normal; }
.section-subtitle{ font-size:clamp(16px, 4.2vw, 20px); padding:0 15px; margin-bottom:30px; text-align:center; }

    /* Center the Premium Collection title and square as a single block */
    .products .section-title{
      display:flex;
      align-items:center;
      justify-content:center;
      gap:14px;
      padding-left:0;
      width:fit-content;
      margin:0 auto 25px;
    }
    .products .section-title::before{
      position:static;
      transform:none;
      display:inline-block;
      flex-shrink:0;
    }
     /* UPDATED: Tab quadrati 380px - FORZATO con padding */
     .products-grid{ display:grid; grid-template-columns:repeat(auto-fit,minmax(380px,1fr)); gap:50px; max-width:1350px; margin:0 auto; }
    .card{ background:#fff; border-radius:25px; overflow:hidden; box-shadow:0 15px 50px rgba(0,0,0,0.15); transition:all 0.4s; }

    /* Mobile: subtle auto-zoom while the user scrolls over the product cards */
    @media (hover:none) and (pointer:coarse){
      #products .card{ transform-origin: 50% 50%; }
      #products .card.is-inview{
        transform: scale(1.03);
        box-shadow:0 18px 60px rgba(0,0,0,0.18);
      }
    }
    @media (prefers-reduced-motion: reduce){
      #products .card{ transition: none !important; }
      #products .card.is-inview{ transform: none !important; }
    }
    /* Hover effects only when real hover exists */
    @media (hover:hover) and (pointer:fine){
      .card:hover{ transform:translateY(-12px) scale(1.02); box-shadow:0 25px 70px rgba(0,0,0,0.25); }
    }

     /* Product image area: let the image define height so it shows fully (no crop, no letterbox). */
     .card-img{ 
       width:100%;
       overflow:hidden; 
       background:linear-gradient(135deg, #f5f5f5, #fff); 
       background-size:cover; 
       background-position:center center; 
       background-repeat:no-repeat;
       position:relative; 
       cursor:pointer; 
       transition:all 0.3s ease;
       line-height:0;
     }
    @media (hover:hover) and (pointer:fine){
      .card-img:hover{ background:linear-gradient(135deg, #fff, #fef5f9); }
    }
    /* overlay button: use a real element instead of pseudo-element so it's clickable */
    .card-img::after{ display:none; }
    .card-img .card-btn{ position:absolute; bottom:18px; left:50%; transform:translateX(-50%) translateY(50px); background:rgba(30,57,141,0.95); color:#fff; padding:12px 28px; border-radius:25px; font-size:15px; letter-spacing:1.2px; text-transform:uppercase; opacity:0; transition:all 0.35s ease; pointer-events:auto; font-weight:600; box-shadow:0 6px 22px rgba(30,57,141,0.35); text-decoration:none; display:inline-block; }
    .card-img:hover .card-btn{ transform:translateX(-50%) translateY(0); opacity:1; }
     /* Image: render fully, no cropping; container grows to fit image height. */
    .card-img img{
      position:relative;
      top:auto;
      left:auto;
      width:100%;
      height:auto;
      display:block;
      object-fit:contain;
      object-position:center center;
      filter:brightness(1.03) drop-shadow(0 10px 30px rgba(0,0,0,0.18));
      transition: transform 0.45s ease, filter 0.28s ease;
      transform:none;
      will-change: transform;
    }

    /* Hover zoom on images (desktop only) */
    @media (hover:hover) and (pointer:fine){
      .card-img img:hover {
        transform: scale(1.12);
        filter: brightness(1.08);
      }
    }

    /* Prevent the three jar product cards from scaling on card hover */
    .card.classico:hover,
    .card.dolcevita:hover,
    .card.pistacchio:hover {
      transform: translateY(-12px);
      box-shadow:0 25px 70px rgba(0,0,0,0.25);
    }
    .card-award{ position:absolute; top:22px; right:22px; background:var(--badiani-yellow); color:#fff; padding:10px 20px; border-radius:25px; font-size:14px; font-weight:600; letter-spacing:1px; text-transform:uppercase; box-shadow:0 4px 15px rgba(216,162,0,0.4); z-index:2; }
    .card-header{ padding:30px 35px; text-align:center; color:#fff; }
    .card.classico .card-header{ background:linear-gradient(135deg, var(--badiani-blue), #2a4ab0); }
    .card.dolcevita .card-header{ background:linear-gradient(135deg, #3d2314, #5a3320); }
    .card.pistacchio .card-header{ background:linear-gradient(135deg, var(--badiani-green), #7f8c5a); }
    .card-name{ font-size:30px; font-weight:700; letter-spacing:1px; text-transform:uppercase; margin-bottom:10px; }
    .card-sub{ font-size:18px; opacity:.9; letter-spacing:1px; font-style:normal; font-weight:300; }
    .card-body{ padding:35px; }
    .card-description{ font-size:21px; margin-bottom:25px; line-height:1.9; color:var(--badiani-gray); font-weight:300; }
    .card-features{ list-style:none; padding:0; display:grid; grid-template-columns:1fr 1fr; gap:14px; }
    .card-features li{ font-size:17px; padding:12px; background:var(--bg-light); border-radius:10px; display:flex; align-items:center; gap:10px; font-weight:400; }
    /* use Unicode escape for checkmark to avoid encoding issues */
    .card-features li::before{ content:"\2713"; color:var(--badiani-pink); font-size:18px; font-weight:700; margin-right:6px; display:inline-block; }

    .specs-overlay{ position:fixed; top:0;left:0; width:100%; height:100%; z-index:9999; display:none; opacity:0; transition:opacity 0.5s ease; overflow:hidden; }
    .specs-overlay.active{ display:block; opacity:1; }
    .specs-overlay-bg{ position:fixed; top:0;left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); backdrop-filter:blur(10px); }
    .specs-overlay-content{ position:relative; z-index:2; display:flex; flex-direction:row; align-items:center; justify-content:center; width:100%; max-width:1150px; height:100vh; margin:0 auto; gap:30px; padding:25px; }
    /* IMMAGINE OVERLAY: quadrata e grande come il pannello specs */
    .specs-overlay-image{ 
      width:50%; 
      max-width:550px; 
      aspect-ratio:1/1;
      overflow:hidden; 
      border-radius:12px; 
      animation:slideLeft 0.6s cubic-bezier(0.34, 1.56, 0.64, 1); 
      box-shadow:0 10px 35px rgba(240,103,166,0.4); 
      background:linear-gradient(135deg, #f5f5f5, #fff); 
      flex-shrink:0;
      position:relative;
    }
    .specs-overlay-image img{ 
      position:absolute;
      top:0;
      left:0;
      width:100%; 
      height:100%; 
      object-fit:cover; 
      display:block; 
      filter:brightness(1.05); 
    }
    @keyframes slideLeft{ from{transform:translateX(-50px);opacity:0;} to{transform:translateX(0);opacity:1;} }
    .specs-panel-fullscreen{ width:55%; max-width:650px; max-height:70vh; overflow-y:auto; background:linear-gradient(135deg, #fff 0%, #f8f8f8 100%); border-radius:12px; padding:25px; box-shadow:0 10px 40px rgba(0,0,0,0.6); animation:slideRight 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) 0.1s both; flex-shrink:0; }
    @keyframes slideRight{ from{transform:translateX(50px);opacity:0;} to{transform:translateX(0);opacity:1;} }
    .specs-panel-title{ font-size:22px; letter-spacing:1px; text-transform:uppercase; color:var(--badiani-blue); margin-bottom:18px; padding-bottom:10px; border-bottom:3px solid var(--badiani-pink); font-weight:700; }
    .specs-grid{ display:grid; grid-template-columns:repeat(2, 1fr); gap:12px; }
    .spec-card{ background:#fff; padding:15px; border-radius:10px; border-left:4px solid var(--badiani-pink); box-shadow:0 2px 8px rgba(0,0,0,0.08); transition:all 0.3s ease; }
    .spec-card:nth-child(odd){ border-left-color:var(--badiani-blue); }
    .spec-card:nth-child(even){ border-left-color:var(--badiani-pink); }
    .spec-card:hover{ transform:translateY(-2px); box-shadow:0 4px 12px rgba(240,103,166,0.15); }
    .spec-label{ font-size:14px; text-transform:uppercase; letter-spacing:0.5px; color:var(--badiani-pink); font-weight:700; margin-bottom:8px; display:block; }
    .spec-card:nth-child(odd) .spec-label{ color:var(--badiani-blue); }
    .spec-card:nth-child(even) .spec-label{ color:var(--badiani-pink); }
    .spec-value{ font-size:16px; font-weight:500; color:var(--badiani-gray); line-height:1.4; }
    .specs-close-btn{ position:fixed; top:18px; right:18px; width:55px; height:55px; background:linear-gradient(135deg, var(--badiani-pink), #ff7ab7); border:none; border-radius:50%; color:#fff; font-size:28px; cursor:pointer; display:flex; align-items:center; justify-content:center; transition:all 0.3s ease; z-index:10; box-shadow:0 5px 20px rgba(240,103,166,0.5); }
    .specs-close-btn:hover{ background:linear-gradient(135deg, var(--badiani-blue), #2a4ab0); transform:rotate(90deg) scale(1.1); box-shadow:0 8px 28px rgba(30,57,141,0.6); }

    .gallery{ background: #ff6b9d url('assets/barattolo-tab.webp?v=20251222') center/cover no-repeat; padding:90px 20px; text-align:center; position:relative; overflow:hidden; }
    .gallery::before{ content:''; position:absolute; inset:0; background:rgba(255,107,157,0.7); z-index:0; }
    .gallery > *{ position:relative; z-index:1; }
    .gallery h2{ font-size:54px; letter-spacing:1px; text-transform:uppercase; margin-bottom:25px; color:#fff; font-weight:700; }
    .gallery-subtitle{ color:#fff; font-size:26px; margin-bottom:55px; opacity:0.95; font-style:normal; font-weight:300; }
    .gallery-grid{ display:flex; justify-content:center; align-items:center; gap:45px; flex-wrap:wrap; min-height:350px; }
    .gallery-item{ 
        width:220px; 
        height:220px; 
        border-radius:50%; 
        overflow:hidden; 
        box-shadow:0 15px 40px rgba(0,0,0,0.3); 
        border:7px solid #fff; 
        transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1), 
                    filter 0.4s ease,
                    opacity 0.4s ease;
        cursor:pointer;
        position:relative;
        z-index:1;
    }
    /* Mobile base: no hover-driven zoom/jitter */
    .gallery-item:hover{ transform:none; }
    .gallery-grid:hover .gallery-item:not(:hover){ transform:none; opacity:1; filter:none; }

    /* Mobile: tap-to-zoom (JS toggles .is-zoomed) */
    @media (hover:none) and (pointer:coarse){
      .gallery-item{ transform-origin:center; }
      .gallery-item.is-zoomed{
        transform:scale(2.52);
        box-shadow:0 30px 80px rgba(0,0,0,0.5), 0 0 60px rgba(255,90,158,0.3);
        z-index:10;
        border-color: var(--badiani-pink);
      }
      .gallery-grid.has-zoom .gallery-item:not(.is-zoomed){
        transform: scale(0.7);
        opacity: 0.55;
        filter: blur(2px) grayscale(30%);
      }
      .gallery-item.is-zoomed img{ transform: scale(1.15); }
    }

    /* Desktop-only hover behavior for gallery */
    @media (hover:hover) and (pointer:fine){
      .gallery-item:hover{ 
          transform:scale(1.8) rotate(0deg); 
          box-shadow:0 30px 80px rgba(0,0,0,0.5), 0 0 60px rgba(255,90,158,0.3); 
          z-index:10;
          border-color: var(--badiani-pink);
      }
      .gallery-grid:hover .gallery-item:not(:hover){
          transform: scale(0.7);
          opacity: 0.5;
          filter: blur(2px) grayscale(30%);
      }
      .gallery-item:hover img{ transform: scale(1.15); }
    }
    .gallery-item img{ 
        width:100%; 
        height:100%; 
        object-fit:cover; 
        filter:brightness(1.1); 
        transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    /* hover img scaling handled in hover media query above */

    /* Gallery lightbox (mobile-friendly, no cropping) */
    .gallery h2,
    .gallery-subtitle{
      transition:
        opacity 0.35s ease,
        transform 0.45s cubic-bezier(0.34, 1.56, 0.64, 1),
        filter 0.35s ease;
      will-change: opacity, transform, filter;
    }
    .gallery.is-lightbox-open h2,
    .gallery.is-lightbox-open .gallery-subtitle{
      opacity:0;
      transform: translateY(-14px) scale(0.98);
      filter: blur(8px);
      pointer-events:none;
    }

    .gallery-lightbox{
      position:fixed;
      inset:0;
      z-index:10002;
      display:none;
      align-items:center;
      justify-content:center;
      padding:18px;
      /* account for mobile browser UI */
      height:100vh;
      height:100dvh;
      min-height:100svh;
    }
    .gallery-lightbox.active{ display:flex; }
    .gallery-lightbox-backdrop{
      position:absolute;
      inset:0;
      background:rgba(0,0,0,0.78);
      backdrop-filter: blur(10px);
      opacity:0;
      transition: opacity 0.28s ease;
    }
    .gallery-lightbox.active .gallery-lightbox-backdrop{ opacity:1; }

    .gallery-lightbox-inner{
      position:relative;
      z-index:1;
      width:min(92vw, 520px);
      max-height:min(78dvh, 620px);
      background: linear-gradient(135deg, rgba(255,255,255,0.12) 0%, rgba(255,255,255,0.06) 100%);
      border: 1px solid rgba(255,255,255,0.18);
      border-radius:22px;
      padding:12px;
      box-shadow:
        0 30px 90px rgba(0,0,0,0.55),
        0 0 60px rgba(240,103,166,0.18);
      transform: translateY(18px) scale(0.96);
      opacity:0;
      transition:
        transform 0.55s cubic-bezier(0.34, 1.56, 0.64, 1),
        opacity 0.28s ease;
    }
    .gallery-lightbox.active .gallery-lightbox-inner{
      transform: translateY(0) scale(1);
      opacity:1;
    }
    .gallery-lightbox-imgwrap{
      border-radius:18px;
      overflow:hidden;
      background: radial-gradient(circle at 30% 20%, rgba(240,103,166,0.28), rgba(30,57,141,0.18) 55%, rgba(0,0,0,0.65) 100%);
      aspect-ratio:1/1;
      width:100%;
      max-height: min(62dvh, 520px);
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .gallery-lightbox-img{
      width:100%;
      height:100%;
      object-fit:contain;
      display:block;
      transform: scale(1);
    }
    .gallery-lightbox-caption{
      margin-top:10px;
      padding:4px 6px 0;
      color:#fff;
      font-size:12px;
      letter-spacing:1.6px;
      text-transform:uppercase;
      opacity:0.9;
      text-align:center;
      line-height:1.35;
    }
    .gallery-lightbox-close{
      position:absolute;
      top:-14px;
      right:-14px;
      width:44px;
      height:44px;
      border-radius:50%;
      border:none;
      background: linear-gradient(135deg, var(--badiani-pink), #ff7ab7);
      color:#fff;
      font-size:22px;
      line-height:1;
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow:0 10px 28px rgba(0,0,0,0.35);
      cursor:pointer;
    }

    /* Reduce motion: keep it snappy and readable */
    @media (prefers-reduced-motion: reduce){
      .gallery h2,
      .gallery-subtitle,
      .gallery-lightbox-backdrop,
      .gallery-lightbox-inner{ transition:none !important; }
      .gallery.is-lightbox-open h2,
      .gallery.is-lightbox-open .gallery-subtitle{ filter:none !important; transform:none !important; }
    }

    .why{ background:linear-gradient(to bottom, #1f4495 0%, #0f1f45 100%); color:#fff; padding:70px 20px; text-align:center; position:relative; overflow:hidden; }
    .why::before{ content:""; position:absolute; inset:0; background-image:url('worldwide.webp'); background-size:cover; background-position:center; opacity:0.08; pointer-events:none; z-index:0; filter: brightness(1.2); }
    .why > *{ position:relative; z-index:1; }
    .why h2{ font-size:50px; letter-spacing:1px; text-transform:uppercase; margin-bottom:35px; color:#fff; font-weight:700; text-shadow:2px 2px 8px rgba(0,0,0,0.3); }
    .why h2 span{ color:var(--badiani-pink); font-style:normal; }
    .benefits{ display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:25px; max-width:1150px; margin:0 auto; }
    .benefit{ background:#152d6a; padding:30px 25px; border-radius:18px; border:2px solid rgba(255,255,255,0.25); transition:all 0.3s; }
    .benefit:hover{ border-color:var(--badiani-pink); background:rgba(255,255,255,0.22); transform:translateY(-5px); box-shadow:0 10px 30px rgba(0,0,0,0.3); }
    @media (hover:hover) and (pointer:fine){
      .benefit:hover{ border-color:var(--badiani-pink); background:rgba(255,255,255,0.22); transform:translateY(-5px); box-shadow:0 10px 30px rgba(0,0,0,0.3); }
    }
    .benefit h3{ font-size:22px; letter-spacing:1.5px; text-transform:uppercase; margin-bottom:15px; color:var(--badiani-yellow); font-weight:600; text-shadow:1px 1px 4px rgba(0,0,0,0.3); }
    .benefit p{ font-size:18px; opacity:.95; line-height:1.8; font-weight:300; text-shadow:1px 1px 3px rgba(0,0,0,0.2); }

    .contact{ padding:70px 20px; text-align:center; }
    .contact > *{ position:relative; z-index:1; }
    .contact h2{ position:relative; display:inline-block; padding-left:50px; font-size:54px; letter-spacing:1px; text-transform:uppercase; color:var(--badiani-blue); margin-bottom:25px; font-weight:700; }
    .contact h2::before{ content:''; position:absolute; left:0; top:50%; transform:translateY(-50%); width:40px; height:40px; background:var(--badiani-pink); border-radius:3px; }
    .contact p{ font-size:19px; margin-bottom:12px; font-weight:300; }
    .contact p.highlight{ color:var(--badiani-pink); font-weight:600; font-size:28px; }
    .cta-btn{ display:inline-block; margin-top:30px; padding:20px 60px; background:var(--badiani-pink); color:#fff; text-decoration:none; border-radius:35px; font-size:16px; font-weight:600; letter-spacing:3px; text-transform:uppercase; transition:all 0.3s; box-shadow:0 8px 25px rgba(240,103,166,0.3); }
    .cta-btn:hover{ background:var(--badiani-blue); transform:translateY(-3px); box-shadow:0 12px 35px rgba(30,57,141,0.4); }

    footer{ background:#333; color:#fff; padding:36px; text-align:center; font-size:16px; font-weight:300; }
    footer span{ color:var(--badiani-pink); font-weight:500; }

    .menu-toggle{ display:none; width:32px; height:28px; flex-direction:column; justify-content:space-between; cursor:pointer; z-index:1001; }
    .menu-toggle span{ display:block; width:100%; height:4px; background:#fff; border-radius:3px; transition:all 0.3s; }
    .menu-toggle.active span:nth-child(1){ transform:translateY(12px) rotate(45deg); }
    .menu-toggle.active span:nth-child(2){ opacity:0; }
    .menu-toggle.active span:nth-child(3){ transform:translateY(-12px) rotate(-45deg); }

    /* ===== RESPONSIVE MOBILE - COMPLETAMENTE PROPORZIONATO ===== */
    
    @media(max-width:1100px){ 
      .products-grid{grid-template-columns:repeat(auto-fit,minmax(320px,1fr));} 
      .story-timeline{grid-template-columns:1fr;gap:30px;} 
    }
    
    @media(max-width:900px){ 
      /* Menu mobile */
      .menu-toggle{display:flex;} 
      header{ flex-wrap:wrap; gap:8px; }
      .neon-text{
        position:static;
        left:auto;
        top:auto;
        transform:none;
        width:100%;
        text-align:center;
        order:3;
        margin-top:2px;
        font-size:14px;
        letter-spacing:3px;
        padding:6px 0;
      }
      .nav-menu{
        position:fixed;
        top:72px;
        right:-100%;
        width:75vw;
        max-width:280px;
        height:auto;
        max-height:calc(100vh - 96px);
        background:var(--badiani-blue);
        flex-direction:column;
        padding:16px 14px 16px;
        transition:right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow:-10px 0 30px rgba(0,0,0,0.5);
        gap:10px;
        align-items:stretch;
        z-index:1000;
        overflow-y:auto;
        border-radius:16px 0 0 16px;
      } 
      .nav-menu.active{right:0;} 
      .nav-menu a{
        font-size:14px;
        padding:14px 16px;
        width:100%;
        border-top:1px solid rgba(240,103,166,0.4);
        background:rgba(255,255,255,0.05);
        border-radius:8px;
        text-align:left;
        letter-spacing:1px;
      }
      .nav-menu a:first-child{
        border-top:none;
      }
      header{padding:12px 15px;} 
      .logo-img{height:46px;} 
      
      /* Hero proporzionato */
      .hero{height:auto; min-height:50vh; padding:40px 15px 35px;} 
      .hero h1{font-size:clamp(26px, 7vw, 36px); letter-spacing:1px; line-height:1.2;} 
      .hero .hero-subtitle{font-size:4vw; line-height:1.4;}
      .hero p{font-size:3.6vw; line-height:1.5; padding:0 5px;}
      .hero-content{
        top:auto;
        bottom:0;
        left:0;
        transform:none;
        width:100%;
        max-width:none;
        padding:18px 14px 20px;
        text-align:left;
        background: linear-gradient(to top, rgba(0,0,0,0.74) 0%, rgba(0,0,0,0.10) 70%, rgba(0,0,0,0.00) 100%);
      }
      .hero:hover .hero-content{ opacity:1; transform:none; filter:none; pointer-events:auto; }
      .hero:hover .hero-bg{ filter:brightness(0.32); transform:none; }

      /* Bigger, more impactful hero photo on mobile */
      .hero{ padding:0; }
      .hero .hero-bg{ height:clamp(320px, 52vh, 480px); background:#1e398d; overflow:hidden; }
      .hero .hero-bg img{ width:200%; max-width:none; height:100%; object-fit:cover; object-position:center; margin-left:-50%; transform:none; transition: margin-left 0.3s ease; }

      /* Hero scroll mode - tap to explore full image */
      .hero.scroll-mode .hero-content{ 
        pointer-events:none; 
        background:transparent !important;
        transition:all 0.3s ease; 
      }
      .hero.scroll-mode .hero-content h1,
      .hero.scroll-mode .hero-content .hero-subtitle,
      .hero.scroll-mode .hero-content p{ opacity:0 !important; transition:opacity 0.3s ease; }
      .hero.scroll-mode .hero-content .hero-cta{ opacity:1 !important; pointer-events:auto; position:relative; z-index:10; }
      .hero.scroll-mode .hero-bg{ overflow-x:auto; overflow-y:hidden; -webkit-overflow-scrolling:touch; scroll-snap-type:x mandatory; filter:none !important; }
      .hero.scroll-mode .hero-bg img{ width:200%; margin-left:0; scroll-snap-align:start; filter:brightness(1); }
      .hero.scroll-mode .hero-bg::-webkit-scrollbar{ display:none; }
      /* Mobile: replace the big “scroll” pill with subtle arrows so the image stays visible */
      .hero-scroll-hint{ display:none !important; }

      .hero.scroll-mode::before,
      .hero.scroll-mode::after{
        position:absolute;
        top:50%;
        transform:translateY(-50%);
        width:34px;
        height:34px;
        border-radius:999px;
        display:flex;
        align-items:center;
        justify-content:center;
        background:rgba(0,0,0,0.28);
        color:rgba(255,255,255,0.92);
        font-size:24px;
        line-height:1;
        z-index:6;
        pointer-events:none;
        box-shadow:0 6px 18px rgba(0,0,0,0.22);
        text-shadow:0 2px 10px rgba(0,0,0,0.35);
      }
      .hero.scroll-mode::before{ content:"\2039"; left:10px; }
      .hero.scroll-mode::after{ content:"\203A"; right:10px; }

      /* Locations (expanded): show arrows on the image layer */
      .global-presence-scroll-hint{ display:none !important; }

      /* IMPORTANT: arrows must NOT be inside the scroll container (otherwise they scroll away).
         We overlay them via a separate element positioned over the section. */
      .global-presence-arrows{ display:none; }
      .global-presence.is-expanded .global-presence-arrows{
        display:block;
        position:absolute;
        inset:0;
        z-index:6;
        pointer-events:none;
      }
      .global-presence.is-expanded .global-presence-arrows::before,
      .global-presence.is-expanded .global-presence-arrows::after{
        position:absolute;
        top:50%;
        transform:translateY(-50%);
        width:34px;
        height:34px;
        border-radius:999px;
        display:flex;
        align-items:center;
        justify-content:center;
        background:rgba(0,0,0,0.28);
        color:rgba(255,255,255,0.92);
        font-size:24px;
        line-height:1;
        box-shadow:0 6px 18px rgba(0,0,0,0.22);
        text-shadow:0 2px 10px rgba(0,0,0,0.35);
        opacity:0.95;
      }
      .global-presence.is-expanded .global-presence-arrows::before{ content:"\2039"; left:10px; }
      .global-presence.is-expanded .global-presence-arrows::after{ content:"\203A"; right:10px; }

      /* Hero text fade-in animation */
      @keyframes heroFadeIn{
        from{ opacity:0; transform:translateY(20px); }
        to{ opacity:1; transform:translateY(0); }
      }
      .hero-content{
        animation: heroFadeIn 0.8s ease-out 0.3s both;
      }
      .hero-content h1{ animation: heroFadeIn 0.7s ease-out 0.4s both; }
      .hero-content .hero-subtitle{ animation: heroFadeIn 0.7s ease-out 0.55s both; }
      .hero-content p{ animation: heroFadeIn 0.7s ease-out 0.7s both; }
      .hero-content .hero-cta{ animation: heroFadeIn 0.6s ease-out 0.85s both; }

      .hero .hero-cta{
        display:inline-block;
        margin-top:14px;
        padding:12px 22px;
        border-radius:999px;
        background: var(--badiani-pink);
        color:#fff;
        text-decoration:none;
        font-size:14px;
        letter-spacing:1.5px;
        text-transform:uppercase;
        font-weight:600;
        box-shadow:0 8px 22px rgba(240,103,166,0.28);
      }
      
      /* Banner e divider */
      .pink-banner{ padding:10px 12px; font-size:3.6vw; letter-spacing:1px; }
      .pink-banner p,
      .pink-banner #bannerCurrent{ font-size:3.6vw; min-height:16px; }
      .section-divider{ padding:10px 12px; font-size:2.8vw; letter-spacing:1px; }
      /* These dividers are repeated many times and increase scroll on mobile */
      .section-divider.visible{ display:none; }
      
      /* Titoli sezione */
      .section-title{ font-size:6vw; padding-left:25px; letter-spacing:0.5px; }
      .section-title::before{ width:20px; height:20px; }
      .section-subtitle{ font-size:3.5vw; padding:0 15px; }
      
      /* Gallery proporzionata */
      .gallery{ padding:40px 10px; }
      .gallery h2{ font-size:6vw; }
      .gallery-subtitle{ font-size:3.5vw; padding:0 15px; margin-bottom:25px; }
      .gallery-grid{ gap:12px; min-height:auto; padding:0 10px; flex-wrap:wrap; justify-content:center; }
      .gallery-item{ width:22vw; height:22vw; max-width:100px; max-height:100px; border-width:3px; }
      /* Mobile sizes only (hover behavior is handled globally via hover media queries) */
      
      /* Barattolo proporzionato */
      .barattolo-intro{ padding:0; margin:0; background:transparent !important; }
      .barattolo-intro::before{ display:none !important; }
      .barattolo-intro-content{ grid-template-columns:1fr; gap:0; padding:0; margin:0; background:transparent; } 
      .barattolo-image-pila{ max-width:none; width:100%; margin:0; padding:0; display:flex; align-items:flex-start; line-height:0; font-size:0; min-width:0; overflow:hidden; background:transparent !important; height:auto; }
      .barattolo-image-pila::after{ display:none !important; }
      .barattolo-image-pila video{ width:100%; height:100%; min-height:0; max-height:64vh; object-fit:cover; border-radius:0; box-shadow:none; display:block; margin:0; padding:0; } 
      .barattolo-text{ text-align:center; padding:40px 15px; background:#3d4f8f url('assets/barattolo-tab.webp?v=20251222') center/cover no-repeat; border-top: none; } 
      .barattolo-text h2{font-size:6vw;}
      .barattolo-text p{ font-size:3.5vw; line-height:1.6; }
      
      /* Mission/Vision proporzionato */
      /* Mission/Vision: tab system to save vertical space */
      .mission-vision{
        display:block;
        position:relative;
      }
      .mv-tabs{
        display:flex;
        border-radius:12px;
        overflow:hidden;
        margin:0 auto 0;
        max-width:240px;
        background:rgba(0,0,0,0.2);
        position:absolute;
        top:12px;
        left:50%;
        transform:translateX(-50%);
        z-index:10;
        padding:3px;
        gap:4px;
        box-shadow:0 2px 8px rgba(0,0,0,0.15);
      }
      .mv-tab{
        flex:1;
        padding:10px 16px;
        text-align:center;
        font-size:11px;
        font-weight:700;
        text-transform:uppercase;
        letter-spacing:1.5px;
        color:rgba(255,255,255,0.85);
        background:transparent;
        border:none;
        cursor:pointer;
        transition:all 0.3s ease;
        border-radius:10px;
        border-bottom:3px solid transparent;
      }
      .mv-tab[data-target="mission-box"].is-active{
        background:var(--badiani-blue);
        color:#fff;
        border-radius:10px;
        box-shadow:0 3px 10px rgba(30,57,141,0.4);
        border-bottom:3px solid var(--badiani-blue);
      }
      .mv-tab[data-target="vision-box"].is-active{
        background:var(--badiani-pink);
        color:#fff;
        border-radius:10px;
        box-shadow:0 3px 10px rgba(240,103,166,0.4);
        border-bottom:3px solid var(--badiani-pink);
      }
      .mission-box, .vision-box{
        padding:60px 16px 20px;
        min-height:auto;
        display:none;
      }
      .mission-box.is-active, .vision-box.is-active{ display:flex; }
      .mission-box h2, .vision-box h2{ font-size:clamp(16px, 5vw, 20px); margin-bottom:8px; }
      .mission-box p, .vision-box p{ font-size:clamp(16px, 4.2vw, 18px); line-height:1.5; }
      
      /* Products proporzionato - ultra compact */
      .products{ padding:24px 8px; }
      .products-grid{ grid-template-columns:1fr; gap:12px; padding:0 4px; }
      .card{ max-width:100%; }
      .card-img{ aspect-ratio: auto; }
      .card-header{ padding:10px 12px 4px; }
      .card-body{ padding:4px 12px 12px; }
      .card-name{ font-size:clamp(18px, 5vw, 22px); margin-bottom:2px; }
      .card-description{ font-size:clamp(13px, 3.5vw, 16px); line-height:1.6; margin-bottom:10px; }
      .card-sub{ font-size:clamp(13px, 3.6vw, 15px); }
      .card-features{ gap:4px; }
      .card-features li{ font-size:clamp(14px, 3.8vw, 16px); padding:8px 10px; }
      
      /* Why section - swipeable compact benefits */
      .why{ padding:24px 10px; }
      .why h2{ font-size:clamp(18px, 5.5vw, 24px); margin-bottom:6px; }
      .why-subtitle{ font-size:clamp(15px, 4.2vw, 18px); padding:0 6px; margin-bottom:12px; }
      .why-grid,
      .benefits{
        display:flex;
        gap:10px;
        overflow-x:auto;
        padding:6px 10px 10px;
        margin-left:-10px;
        margin-right:-10px;
        scroll-snap-type:x mandatory;
        -webkit-overflow-scrolling:touch;
      }
      .benefits::-webkit-scrollbar{ display:none; }
      .benefit{
        flex:0 0 68vw;
        max-width:260px;
        min-width:180px;
        padding:12px 10px;
        scroll-snap-align:start;
        border-radius:12px;
      }
      .benefit h3{ font-size:clamp(12px, 3.6vw, 15px); margin-bottom:4px; }
      .benefit p{ font-size:clamp(15px, 4vw, 17px); line-height:1.35; }
      
      /* Contact proporzionato */
      .contact{ padding:40px 15px; }
      .contact h2{ font-size:6vw; }
      .contact p{ font-size:4vw; padding:0 10px; }
      .contact p.highlight{ font-size:4.5vw; }
      .cta-btn{ padding:12px 25px; font-size:3.5vw; }
      
      /* Footer proporzionato */
      footer{ padding:25px 15px; font-size:3.5vw; }

      /* Global Presence - cropped 15% each side */
      .global-presence{ 
        aspect-ratio:auto; 
        height:clamp(180px, 35vh, 280px);
      }
      .global-presence-bg img{ width:143%; left:50%; transform:translateX(-50%); }
      
      /* Heritage proporzionato - compact */
      .heritage{ padding:24px 12px; }
      .heritage h2{ font-size:clamp(16px, 5.2vw, 22px); margin-bottom:8px; padding-left:22px; }
      .heritage h2::before{ width:16px; height:16px; }
      .heritage p{ font-size:clamp(15px, 4vw, 17px); line-height:1.5; }
      .story-lead{ font-size:clamp(15px, 4.2vw, 17px); line-height:1.5; padding:0 6px; }

      /* Heritage stats: ultra-compact chips */
      .heritage-intro{ margin:0 auto 12px; }
      .stats{
        grid-template-columns:repeat(2, minmax(0, 1fr));
        gap:6px;
      }
      .stat{
        padding:12px 24px;
        border-radius:10px;
        display:flex;
        flex-direction:column;
        align-items:center;
        justify-content:center;
        gap:4px;
        min-height:70px;
        aspect-ratio:2.5/1;
      }
      .stat-num{
        font-size:clamp(16px, 5.5vw, 22px);
        margin-bottom:0;
        line-height:1;
      }
      .stat-label{
        font-size:clamp(12px, 3.2vw, 14px);
        letter-spacing:0.5px;
        line-height:1.1;
        text-align:center;
        max-width:100%;
        display:-webkit-box;
        -webkit-box-orient:vertical;
        -webkit-line-clamp:2;
        line-clamp:2;
        overflow:hidden;
      }
      /* touch devices: no hover lift */
      .stat:hover{ transform:none; }

      /* Story timeline - ultra compact swipeable */
      /* IMPORTANT: su mobile non tagliare card/ombre laterali */
      .buontalenti-story{ padding:24px 10px; overflow:visible; }
      .story-header{ margin-bottom:14px; }
      .story-title{ font-size:clamp(18px, 6.5vw, 26px); padding-left:0; display:flex; flex-wrap:wrap; justify-content:center; align-items:center; gap:4px 6px; text-align:center; }
      .story-title::before{ position:static; transform:none; width:14px; height:14px; flex-shrink:0; }
      .story-title-main{ display:inline; }
      .story-title-sub{ width:100%; display:block; font-size:clamp(14px, 4.5vw, 20px); }
      .story-timeline{
        display:flex;
        gap:10px;
        overflow-x:auto;
        padding:6px 10px 10px;
        margin-left:-10px;
        margin-right:-10px;
        margin-top:10px;
        scroll-snap-type:x mandatory;
        scroll-padding-left:10px;
        -webkit-overflow-scrolling: touch;
      }
      .story-timeline::-webkit-scrollbar{ display:none; }
      .timeline-item{
        flex:0 0 70vw;
        max-width:280px;
        min-width:200px;
        padding:12px 10px;
        scroll-snap-align:start;
        border-left-width:3px;
        border-radius:12px;
        box-shadow:0 6px 18px rgba(0,0,0,0.08);
      }
      .timeline-year{ font-size:clamp(20px, 7vw, 30px); margin-bottom:4px; letter-spacing:0.5px; }
      .timeline-title{ font-size:clamp(15px, 4.2vw, 17px); margin-bottom:4px; }
      /* Compact by default: meno scroll verticale, espandibile con tap */
      .timeline-desc{
        font-size:clamp(15px, 4vw, 17px);
        line-height:1.4;
        display:-webkit-box;
        -webkit-box-orient:vertical;
        -webkit-line-clamp:4;
        line-clamp:4;
        overflow:hidden;
      }
      .timeline-item.is-open .timeline-desc{ -webkit-line-clamp:unset; line-clamp:unset; }
      .timeline-item{ cursor:pointer; }
      /* (overridden above) */
      
      /* Locations proporzionato */
      .locations-strip{ padding:35px 10px; }
      .locations-strip h2{ font-size:5vw; }
      .locations-list{ font-size:3vw; gap:10px; flex-wrap:wrap; justify-content:center; }
      
      /* Customizer proporzionato */
      .neon-text{ font-size: 2.8vw; letter-spacing: 2px; }
      .customizer-content{ padding: 25px 15px; max-width: 92vw; }
      .customizer-modal{ padding: 10px; }
      .flavor-options{ grid-template-columns: repeat(3, 1fr); gap: 8px; }
      .flavor-option{ padding: 10px 6px; }
      .flavor-circle{ width: 10vw; max-width:40px; height: 10vw; max-height:40px; }
      .flavor-name{ font-size: 2.5vw; }
      .customizer-title{ font-size: 5vw; }
      .customizer-subtitle{ font-size: 3vw; }
      
      /* Specs overlay (mobile): account for browser nav bar and avoid content cropping */
      .specs-overlay{ height:100vh; height:100dvh; }
      .specs-overlay-bg{ height:100vh; height:100dvh; }
      .specs-overlay-content{
        flex-direction:column;
        padding:10px;
        height:100vh;
        height:100dvh;
        /* iOS/Safari friendly fallback for the smallest viewport */
        min-height:100svh;
        overflow-y:auto;
        gap:14px;
        justify-content:flex-start;
        padding-top:64px;
        padding-bottom:24px;
      }
      /* Photo smaller on mobile so specs fit even with browser UI */
      .specs-overlay-image{
        width:auto;
        max-width:90vw;
        height:min(28dvh, 230px);
        /* fallback if dvh isn't supported */
        max-height:28vh;
        aspect-ratio:1/1;
        flex-shrink:0;
      }
      .specs-overlay-image img{ padding:0; }
      .specs-panel-fullscreen{
        width:95vw;
        max-width:none;
        max-height:none;
        padding:10px;
        /* critical for flex + overflow in column layout */
        flex:1 1 auto;
        min-height:0;
        overflow-y:auto;
      }
      .specs-panel-title{font-size:16px;margin-bottom:8px;padding-bottom:6px;}
      .specs-grid{gap:6px;}
      .spec-card{padding:6px 8px;border-radius:6px;border-left-width:3px;}
      .spec-label{font-size:12px;margin-bottom:2px;letter-spacing:0.3px;}
      .spec-value{font-size:14px;line-height:1.2;}
      .specs-close-btn{top:8px;right:8px;width:40px;height:40px;font-size:20px;}
    }
    
    @media(max-width:600px){ 
      /* Ancora più piccolo per schermi piccoli */
      .hero{min-height:45vh; padding:30px 12px 30px;} 
      .hero h1{font-size:6.5vw;} 
      .hero .hero-subtitle{font-size:3.8vw;}
      .hero p{font-size:3.4vw;}
      
      .gallery-item{ width:20vw; height:20vw; max-width:85px; max-height:85px; border-width:2px; }
      
      .nav-menu{ width:80vw; padding:16px 14px 16px; }
      .nav-menu a{ font-size:13px; padding:12px 14px; }
      
      .card-img{ aspect-ratio: auto; }
      
      .mission-box, .vision-box{ padding:55px 15px 20px; }
      
      .flavor-options{ grid-template-columns: repeat(2, 1fr); }
      .flavor-circle{ width: 12vw; max-width:45px; height: 12vw; max-height:45px; }
      .flavor-name{ font-size: 3vw; }
    }
    
    @media(max-width:400px){
      /* Ultra-piccolo per schermi molto stretti */
      header{ padding:10px 12px; }
      .logo-img{ height:40px; }
      
      .hero{min-height:40vh; padding:25px 10px;} 
      .hero h1{font-size:6vw;} 
      .hero .hero-subtitle{font-size:3.5vw;}
      
      .section-title{ font-size:5.5vw; padding-left:20px; }
      .section-title::before{ width:16px; height:16px; }
      
      .gallery-item{ width:18vw; height:18vw; max-width:70px; max-height:70px; }
      
      .barattolo-image-pila{ width:100vw; max-width:none; } 
      .barattolo-image-pila video{ min-height:auto; }
      .barattolo-text h2{font-size:5.5vw;}
      
      .nav-menu{ width:85vw; }
      .nav-menu a{ font-size:12px; padding:10px 12px; }
      
      .cta-btn{ padding:10px 20px; font-size:3.2vw; }
      
      .stat{ min-height:70px; padding:12px 24px; aspect-ratio:2.5/1; }
      .stat-num{ font-size:clamp(17px, 6.8vw, 24px); }
    }

    /* HERO BG: full-width photo (no crop). The image defines the hero height. */
    .hero{
      height:auto;
      padding:0;
      display:block;
    }

    .hero .hero-bg{
      position:relative;
      top:auto; left:auto; right:auto; bottom:auto;
      background-image: none;
      background: none;
      transform: none;
      transform-origin: center;
      width:100%;
      height:auto;
    }

    .hero .hero-bg img{
      display:block;
      width:100%;
      height:auto;
      max-width:none;
    }

    /* Mobile: hero photo cropped sides, original height */
    @media(max-width:900px){
      .hero .hero-bg{ height:clamp(320px, 52vh, 480px); background:#1e398d; overflow:hidden; }
      .hero .hero-bg img{ width:200%; max-width:none; height:100%; object-fit:cover; object-position:center; margin-left:-50%; transform:none; }
    }

    /* No hover zoom */
    .hero:hover .hero-bg{
      transform: none;
    }

    /* Elimina lo spazietto tra barra rosa e foto hero (seam da sub-pixel) */
    #scrollBanner{ margin-bottom: 0; }
    #hero{ margin-top: -1px; }
  </style>
</head>
<body>

<!-- CUSTOMIZER MODAL -->
<div class="customizer-modal" id="customizerModal">
  <div class="customizer-content">
    <button class="specs-close-btn" id="customizerClose" aria-label="Close">&times;</button>
    <h2 class="customizer-title">Create Your Gelato</h2>
    <p class="customizer-subtitle">Choose your favorite flavors for your custom cursor!</p>

    <div class="flavor-selector">
      <label class="flavor-label">Left Scoop</label>
      <div class="flavor-options" id="flavor1Options">
        <div class="flavor-option" data-color="#3d2314" data-stroke="#2a1810" data-name="Hazelnut">
          <div class="flavor-circle" style="background:#3d2314;"></div>
          <div class="flavor-name">Hazelnut</div>
        </div>
        <div class="flavor-option" data-color="#f067a6" data-stroke="#cc4882" data-name="Strawberry">
          <div class="flavor-circle" style="background:#f067a6;"></div>
          <div class="flavor-name">Strawberry</div>
        </div>
        <div class="flavor-option" data-color="#8DB57E" data-stroke="#6B9460" data-name="Pistachio">
          <div class="flavor-circle" style="background:#8DB57E;"></div>
          <div class="flavor-name">Pistachio</div>
        </div>
        <div class="flavor-option" data-color="#FFE4B5" data-stroke="#E6C896" data-name="Buontalenti">
          <div class="flavor-circle" style="background:#FFE4B5;"></div>
          <div class="flavor-name">Buontalenti</div>
        </div>
        <div class="flavor-option" data-color="#FF8C00" data-stroke="#CC7000" data-name="Mango">
          <div class="flavor-circle" style="background:#FF8C00;"></div>
          <div class="flavor-name">Mango</div>
        </div>
        <div class="flavor-option" data-color="#9370DB" data-stroke="#7456B9" data-name="Blueberry">
          <div class="flavor-circle" style="background:#9370DB;"></div>
          <div class="flavor-name">Blueberry</div>
        </div>
      </div>
    </div>

    <div class="flavor-selector">
      <label class="flavor-label">Right Scoop</label>
      <div class="flavor-options" id="flavor2Options">
        <div class="flavor-option" data-color="#3d2314" data-stroke="#2a1810" data-name="Hazelnut">
          <div class="flavor-circle" style="background:#3d2314;"></div>
          <div class="flavor-name">Hazelnut</div>
        </div>
        <div class="flavor-option" data-color="#f067a6" data-stroke="#cc4882" data-name="Strawberry">
          <div class="flavor-circle" style="background:#f067a6;"></div>
          <div class="flavor-name">Strawberry</div>
        </div>
        <div class="flavor-option" data-color="#8DB57E" data-stroke="#6B9460" data-name="Pistachio">
          <div class="flavor-circle" style="background:#8DB57E;"></div>
          <div class="flavor-name">Pistachio</div>
        </div>
        <div class="flavor-option" data-color="#FFE4B5" data-stroke="#E6C896" data-name="Buontalenti">
          <div class="flavor-circle" style="background:#FFE4B5;"></div>
          <div class="flavor-name">Buontalenti</div>
        </div>
        <div class="flavor-option" data-color="#FF8C00" data-stroke="#CC7000" data-name="Mango">
          <div class="flavor-circle" style="background:#FF8C00;"></div>
          <div class="flavor-name">Mango</div>
        </div>
        <div class="flavor-option" data-color="#9370DB" data-stroke="#7456B9" data-name="Blueberry">
          <div class="flavor-circle" style="background:#9370DB;"></div>
          <div class="flavor-name">Blueberry</div>
        </div>
      </div>
    </div>

    <div class="preview-section">
      <div class="preview-title">Your Custom Cursor</div>
      <div class="cursor-preview">
        <svg width="80" height="80" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg" id="cursorPreview">
          <defs><filter id="shadow"><feDropShadow dx="1" dy="1" stdDeviation="1" flood-opacity="0.5"/></filter></defs>
          <g transform="translate(20, 20) rotate(20) translate(-20, -20)" filter="url(#shadow)">
            <path d="M20 38 L 12 16 L 28 16 Z" fill="#F4CB93" stroke="#CF9052" stroke-width="0.5"/>
            <line x1="14.5" y1="22" x2="25.5" y2="22" stroke="#CF9052" stroke-width="0.5" opacity="0.5"/>
            <line x1="16" y1="28" x2="24" y2="28" stroke="#CF9052" stroke-width="0.5" opacity="0.5"/>
            <circle id="preview-scoop1" cx="15.5" cy="13" r="6" fill="#3d2314" stroke="#2a1810" stroke-width="0.5"/>
            <circle id="preview-scoop2" cx="24.5" cy="12.5" r="6" fill="#f067a6" stroke="#cc4882" stroke-width="0.5"/>
            <circle cx="26" cy="11" r="1" fill="#fff" opacity="0.4"/>
          </g>
        </svg>
      </div>
    </div>
  </div>
</div>

<div class="header-wrapper">
  <header>
    <a class="logo-link" id="logoLink" href="#hero" aria-label="Back to top">
      <img src="assets/extracted/f473fa4a48ae6948929084c736e84f6274322e2d.webp" alt="Badiani Gelato Firenze 1932" class="logo-img">
    </a>

    <nav class="nav-menu" id="navMenu">
      <a href="#hero">Home</a>
      <a href="#products">Products</a>
      <a href="#story">Story</a>
      <a href="#heritage">Heritage</a>
      <a href="#barattolo">Il Barattolo</a>
      <a href="#locations">Locations</a>
      <a href="#contact">Contact</a>
    </nav>

    <div class="menu-toggle" id="menuToggle">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </header>
  <div class="pink-banner" id="scrollBanner">
    <div id="bannerCurrent" class="banner-ticker" aria-live="polite"></div>
  </div>
</div>

<div class="section-divider-data" data-section="hero" data-text="iconic italian gelato &middot; since 1932 &middot; from florence with love"></div>

<section id="hero" class="hero">
  <div class="hero-bg" aria-hidden="true">
    <img src="freezer-prodotti.webp" alt="" decoding="async" loading="eager">
  </div>
  <div class="hero-content">
    <h1>Il Barattolo <span>GELATO</span></h1>
    <p class="hero-subtitle">A Creative Flavour Journey from Florence</p>
    <p>Authentic Florentine artisan gelato for premium retail distribution. Over 90 years of gelato-making excellence from the birthplace of gelato.</p>
    <a class="hero-cta" href="#products" aria-label="Jump to products">Explore Flavours</a>
  </div>
</section>

<div class="section-divider-data" data-section="products" data-text="award-winning flavours &middot; classico &middot; pistacchio &middot; dolcevita"></div>

<div class="section-divider visible">
  <p>award-winning flavours &middot; classico &middot; pistacchio &middot; dolcevita</p>
</div>

<section id="products" class="products">
  <h2 class="section-title">Premium <span>Collection</span></h2>
  <p class="section-subtitle">Three iconic flavours, authentic Florentine craftsmanship</p>

  <div class="products-grid">

    <article class="card classico">
      <div class="card-img" onclick="openSpecs('classico', 'BUONTALENTI CLASSICO')">
        <a class="card-btn" href="#" aria-label="View Buontalenti Classico specs" onclick="openSpecs('classico', 'BUONTALENTI CLASSICO'); event.stopPropagation(); return false;">View Specs</a>
        <img src="classico.webp" alt="Buontalenti Classico">
      </div>
      <div class="card-header">
        <div class="card-name">BUONTALENTI CLASSICO</div>
        <div class="card-sub">La Crema Fiorentina</div>
      </div>
      <div class="card-body">
        <p class="card-description">
          Our world-famous flagship flavour made with only <span class="highlight-pink">four ingredients</span>: cream, milk, sugar, and free-range eggs.
        </p>
        <ul class="card-features">
          <li>4 ingredients only</li>
          <li>Free-range eggs</li>
          <li>Gluten-free</li>
          <li>24-month shelf life</li>
        </ul>
      </div>
    </article>

    <article class="card dolcevita">
      <div class="card-img" onclick="openSpecs('dolcevita', 'BUONTALENTI DOLCEVITA')">
        <a class="card-btn" href="#" aria-label="View Buontalenti Dolcevita specs" onclick="openSpecs('dolcevita', 'BUONTALENTI DOLCEVITA'); event.stopPropagation(); return false;">View Specs</a>
        <div class="card-award">Best Flavour 2015</div>
        <img src="dolcevita.webp" alt="Buontalenti Dolcevita">
      </div>
      <div class="card-header">
        <div class="card-name">BUONTALENTI DOLCEVITA</div>
        <div class="card-sub">Variegata alla Gianduia</div>
      </div>
      <div class="card-body">
        <p class="card-description">
          Custard gelato with <span class="highlight-pink">gianduia</span> hazelnut-cocoa spread (<span class="percent-boost">20%</span>). Made with Italian hazelnut paste and Madagascar Bourbon vanilla.
        </p>
        <ul class="card-features">
          <li>Italian hazelnut 2.6%</li>
          <li>Madagascar vanilla</li>
          <li>Gluten-free</li>
          <li>Award-winning</li>
        </ul>
      </div>
    </article>

    <article class="card pistacchio">
      <div class="card-img" onclick="openSpecs('pistacchio', 'BUONTALENTI PISTACCHIO')">
        <a class="card-btn" href="#" aria-label="View Buontalenti Pistacchio specs" onclick="openSpecs('pistacchio', 'BUONTALENTI PISTACCHIO'); event.stopPropagation(); return false;">View Specs</a>
        <div class="card-award">World Best-Seller</div>
        <img src="pistacchio.webp" alt="Buontalenti Pistacchio">
      </div>
      <div class="card-header">
        <div class="card-name">BUONTALENTI PISTACCHIO</div>
        <div class="card-sub">Variegata al Pistacchio</div>
      </div>
      <div class="card-body">
        <p class="card-description">
          Our most popular flavour worldwide. Custard gelato swirled with pistachio spreadable cream (<span class="percent-boost">20%</span>) and <span class="highlight-pink">5% pure pistachio</span> paste.
        </p>
        <ul class="card-features">
          <li>5% pistachio paste</li>
          <li>Free-range eggs</li>
          <li>Gluten-free</li>
          <li>Global favourite</li>
        </ul>
      </div>
    </article>

  </div>
</section>

<div class="section-divider-data" data-section="story" data-text="the renaissance of gelato &middot; born in florence 1932 &middot; tradition meets innovation"></div>

<section id="story" class="buontalenti-story">
  <div class="story-inner">
    <div class="story-header">
      <h2 class="story-title"><span class="story-title-main">Buontalenti:</span> <span class="story-title-sub">The Cream That Made History</span></h2>
      <p class="story-lead">
        In the 1960s, in Florence, Badiani dedicated a special flavour to <span class="highlight-pink">Bernardo Buontalenti</span>, the Renaissance architect to whom tradition attributes the birth of <span class="highlight-pink">gelato</span> in the 16th century.
      </p>
    </div>

    <div class="story-timeline">
      <div class="timeline-item">
        <div class="timeline-year">1500s</div>
        <div class="timeline-title">The Origin</div>
        <p class="timeline-desc">Bernardo Buontalenti invents gelato in <span class="highlight-pink">Renaissance Florence</span>, creating a frozen delicacy for the Medici court.</p>
      </div>

      <div class="timeline-item">
        <div class="timeline-year">1960s</div>
        <div class="timeline-title">The Tribute</div>
        <p class="timeline-desc">Badiani creates the "Buontalenti" cream with <span class="highlight-pink">4 simple ingredients</span> (cream, milk, sugar, eggs) honouring the inventor.</p>
      </div>

      <div class="timeline-item">
        <div class="timeline-year">Today</div>
        <div class="timeline-title">The Legacy</div>
        <p class="timeline-desc">Il Barattolo Gelato brings this iconic Florentine flavour to <span class="highlight-pink">premium retail</span> worldwide.</p>
      </div>
    </div>
  </div>
</section>

<div class="section-divider-data" data-section="heritage" data-text="from florence to the world &middot; 93 years of excellence &middot; a global legacy"></div>

<div class="section-divider visible">
  <p>from florence to the world &middot; 93 years of excellence &middot; a global legacy</p>
</div>

<section id="heritage" class="heritage">
  <h2>A Legacy of Excellence</h2>
  <p class="heritage-intro">
    Born in <span class="highlight-pink">Florence in 1932</span>, Badiani is one of the world's most prestigious gelato producers. From the birthplace of gelato, we have built an international presence spanning five countries across three continents.
  </p>
  <div class="stats">
    <div class="stat">
      <div class="stat-num">1932</div>
      <div class="stat-label">Founded in Florence</div>
    </div>
    <div class="stat">
      <div class="stat-num">30+</div>
      <div class="stat-label">Stores Worldwide</div>
    </div>
    <div class="stat">
      <div class="stat-num">100%</div>
      <div class="stat-label">Artisan Quality</div>
    </div>
    <div class="stat">
      <div class="stat-num">5</div>
      <div class="stat-label">Countries</div>
    </div>
  </div>
</section>

<div class="section-divider-data" data-section="barattolo" data-text="il barattolo &middot; premium retail format &middot; authentic florentine gelato at home"></div>

<section id="barattolo" class="barattolo-intro">
  <div class="barattolo-intro-content">
    <div class="barattolo-image-pila">
      <video autoplay muted loop playsinline preload="metadata" poster="assets/barattolo-showcase.jpg">
        <source src="1120.mp4" type="video/mp4">
      </video>
    </div>
    <div class="barattolo-text">
      <h2>Il Barattolo <span>GELATO</span></h2>
      <p>
        Thanks to the success of our Buontalenti, Buontalenti Pistacchio, and La Dolcevita flavours, we have developed <span class="highlight-pink">Il Barattolo GELATO</span> — a premium line designed for <span class="highlight-pink">large-scale distribution</span>.
      </p>
      <p>
        This innovative format brings the authentic artisanal quality of our gelato to a wider audience, making it more accessible without compromising on ingredient excellence and traditional craftsmanship.
      </p>
      <p>
        With Il Barattolo Gelato, everyone can enjoy the rich, creamy flavours that have made Badiani famous, now in a convenient <span class="highlight-pink">500ml format</span>.
      </p>
    </div>
  </div>
</section>

<div class="section-divider-data" data-section="mission" data-text="artisan craftsmanship &middot; premium ingredients &middot; unforgettable taste"></div>

<div class="section-divider visible">
  <p>artisan craftsmanship &middot; premium ingredients &middot; unforgettable taste</p>
</div>

<section id="mission" class="mission-vision">
  <nav class="mv-tabs" aria-label="Mission and Vision tabs">
    <button class="mv-tab is-active" data-target="mission-box" aria-selected="true">Mission</button>
    <button class="mv-tab" data-target="vision-box" aria-selected="false">Vision</button>
  </nav>
  <div class="mission-box is-active">
    <h2>Our Mission</h2>
    <p><strong>Bring Flavour to Your Life</strong></p>
    <p>To bring joy to consumers of all ages through our iconic artisan gelato, always adhering to principles of high quality and sustainability.</p>
  </div>
  <div class="vision-box">
    <h2>Our Vision</h2>
    <p><strong>Inspiring the World with Gelato</strong></p>
    <p>To become the finest gelato brand in the world and inspire people with the taste of freshly-made artisan products.</p>
  </div>
</section>

<div class="section-divider-data" data-section="gallery" data-text="artisan texture &middot; handcrafted swirls &middot; visual delight in every spoonful"></div>

<div class="section-divider visible">
  <p>artisan texture &middot; handcrafted swirls &middot; visual delight in every spoonful</p>
</div>

<div class="specs-overlay" id="specsOverlay" onclick="closeSpecsOnBackground(event)">
  <div class="specs-overlay-bg"></div>
  <button class="specs-close-btn" onclick="closeSpecs(event)">&times;</button>
  <div class="specs-overlay-content">
    <div class="specs-overlay-image">
      <img id="overlayImage" src="" alt="">
    </div>
    <div class="specs-panel-fullscreen">
      <h3 class="specs-panel-title" id="overlayTitle"></h3>
      <div class="specs-grid" id="overlaySpecsContent"></div>
    </div>
  </div>
</div>

<section id="gallery" class="gallery">
  <h2>Artisan Texture</h2>
  <p class="gallery-subtitle">Beautiful variegated swirls showcase our authentic artisanal craftsmanship</p>
  <div class="gallery-grid">
    <div class="gallery-item"><img src="top-classico.webp" alt="Buontalenti Classico top view" loading="lazy"></div>
    <div class="gallery-item"><img src="top-dolcevita.webp" alt="Buontalenti Dolcevita top view" loading="lazy"></div>
    <div class="gallery-item"><img src="top-pistacchio.webp" alt="Buontalenti Pistacchio top view" loading="lazy"></div>
</div>
</section>

<div class="section-divider-data" data-section="locations" data-text="london &middot; barcelona &middot; paris &middot; tokyo &middot; florence &middot; everywhere in style"></div>

<div class="section-divider visible">
  <p>london &middot; barcelona &middot; paris &middot; tokyo &middot; florence &middot; everywhere in style</p>
</div>

<section id="locations" class="global-presence">
  <div class="global-presence-bg" aria-hidden="true">
    <img src="worldwide.webp?v=20251222" alt="" loading="lazy" decoding="async">
  </div>
  <div class="global-presence-arrows" aria-hidden="true"></div>
  <div class="global-presence-headline">
    <h2 class="world-means-title" aria-label="Badiani around the world means gelato">
      <span class="wmt-top">Badiani Around The World</span>
      <span class="wmt-mid">Means</span>
      <span class="wmt-bottom">Gelato</span>
    </h2>
  </div>
  <div class="global-presence-scroll-hint" aria-hidden="true">← Scorri per vedere tutto →</div>
</section>

<div class="section-divider-data" data-section="why" data-text="heritage &middot; quality &middot; global reach &middot; retail excellence &middot; choose badiani"></div>

<div class="section-divider visible">
  <p>heritage &middot; quality &middot; global reach &middot; retail excellence &middot; choose badiani</p>
</div>

<section id="why" class="why">
  <h2>Why Choose <span>Badiani</span></h2>
  <div class="benefits">
    <div class="benefit">
      <h3>Heritage</h3>
      <p><span class="highlight-pink">93 years</span> of gelato-making excellence from Florence, the birthplace of gelato</p>
    </div>
    <div class="benefit">
      <h3>Global Presence</h3>
      <p>30+ stores worldwide including the <span class="highlight-pink">Louvre Museum</span> in Paris</p>
    </div>
    <div class="benefit">
      <h3>Artisan Quality</h3>
      <p>Premium Italian ingredients, award-winning recipes, traditional craftsmanship</p>
    </div>
    <div class="benefit">
      <h3>Retail Ready</h3>
      <p>500ml format, <span class="highlight-pink">24-month shelf life</span> at -18°C, EUR/EPAL pallet compatible</p>
    </div>
  </div>
</section>



<div class="section-divider-data" data-section="contact" data-text="partner with us &middot; bring florence to your customers &middot; let's grow together"></div>

<section id="contact" class="contact">
  <h2>Partner With Badiani</h2>
  <p class="highlight">Bring the authentic taste of Florence to your customers</p>
  <p>info@badiani1932.com &middot; www.badiani1932.com</p>
  <p style="font-size:15px;color:#999;">London &middot; Barcelona &middot; Paris &middot; Florence &middot; Tokyo</p>
  <a id="requestDistributionBtn" href="mailto:info@badiani1932.com" class="cta-btn" aria-label="Request distribution information via email">Request Distribution Info</a>
</section>

<footer>
  &copy; 2025 <span>Badiani Gelato Firenze 1932</span> &middot; Manufactured by G7 s.r.l., Via Romagnoli 19, Bentivoglio (BO) Italy
</footer>

<script>
const specsData = {
  classico: { image: 'classico-open.webp', specs: [ {label:'Product Code', value:'BBT-0010'}, {label:'Description', value:'Custard Gelato'}, {label:'Net Weight', value:'500ml / 300g'}, {label:'EAN Product', value:'8056214620017'}, {label:'EAN Carton', value:'08056214620109'}, {label:'Shelf Life', value:'24 months at -18°C (-0.4°F)'}, {label:'Energy', value:'255 kcal / 1066 kJ per 100g'}, {label:'Allergens', value:'MILK, EGGS'}, {label:'May Contain', value:'SOY, NUTS, PEANUTS'}, {label:'Gluten', value:'GLUTEN FREE'} ] },
  dolcevita: { image: 'dolcevita-open.webp', specs: [ {label:'Product Code', value:'BDV-0020'}, {label:'Description', value:'Custard gelato with gianduia spread 20%'}, {label:'Net Weight', value:'500ml / 300g'}, {label:'EAN Product', value:'8056214620031'}, {label:'EAN Carton', value:'08056214620307'}, {label:'Shelf Life', value:'24 months at -18°C (-0.4°F)'}, {label:'Energy', value:'333 kcal / 1385 kJ per 100g'}, {label:'Allergens', value:'MILK, HAZELNUTS, EGGS'}, {label:'May Contain', value:'SOY, other NUTS, PEANUTS'}, {label:'Gluten', value:'GLUTEN FREE'} ] },
  pistacchio: { image: 'pistacchio-open.webp', specs: [ {label:'Product Code', value:'BBTP-0030'}, {label:'Description', value:'Custard gelato with pistachio spread 20%'}, {label:'Net Weight', value:'500ml / 300g'}, {label:'EAN Product', value:'8056214620055'}, {label:'EAN Carton', value:'08056214620505'}, {label:'Shelf Life', value:'24 months at -18°C (-0.4°F)'}, {label:'Energy', value:'333 kcal / 1385 kJ per 100g'}, {label:'Allergens', value:'MILK, PISTACHIO'}, {label:'May Contain', value:'SOY, other NUTS, PEANUTS'}, {label:'Gluten', value:'GLUTEN FREE'} ] }
};

// CUSTOMIZER LOGIC
let selectedFlavor1 = { color: '#3d2314', stroke: '#2a1810' };
let selectedFlavor2 = { color: '#f067a6', stroke: '#cc4882' };


function openSpecs(productId, title) {
  const overlay = document.getElementById('specsOverlay');
  const overlayImage = document.getElementById('overlayImage');
  const overlayTitle = document.getElementById('overlayTitle');
  const overlaySpecsContent = document.getElementById('overlaySpecsContent');
  const data = specsData[productId];

  overlayImage.src = data.image;
  overlayTitle.textContent = title;

  let specsHTML = '';
  data.specs.forEach(spec => {
    specsHTML += `<div class="spec-card"><span class="spec-label">${spec.label.toUpperCase()}</span><span class="spec-value">${spec.value}</span></div>`;
  });
  overlaySpecsContent.innerHTML = specsHTML;

  overlay.classList.add('active');
  document.body.style.overflow = 'hidden';
}

function closeSpecs(event) {
  if(event) event.stopPropagation();
  const overlay = document.getElementById('specsOverlay');
  overlay.classList.remove('active');
  document.body.style.overflow = '';
}

function closeSpecsOnBackground(event) {
  const overlay = document.getElementById('specsOverlay');
  if (!overlay || !overlay.classList.contains('active')) return;

  // If the tap/click happened inside the visible panel (image or specs card), do nothing.
  // We intentionally allow the outer container/padding area to behave like a backdrop.
  const t = event && event.target;
  if (t && t.closest) {
    if (t.closest('.specs-overlay-image, .specs-panel-fullscreen, .specs-close-btn')) return;
  }

  // Otherwise, any click within the overlay closes it (including the black background).
  closeSpecs(event);
}

document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    closeSpecs();
    closeCustomizer();
  }
});

const menuToggle = document.getElementById('menuToggle');
const navMenu = document.getElementById('navMenu');

// Crea overlay per menu mobile
const menuOverlay = document.createElement('div');
menuOverlay.className = 'menu-overlay';
menuOverlay.style.cssText = 'position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);z-index:999;opacity:0;visibility:hidden;transition:all 0.3s ease;backdrop-filter:blur(3px);';
document.body.appendChild(menuOverlay);

menuToggle.addEventListener('click', () => {
  menuToggle.classList.toggle('active');
  navMenu.classList.toggle('active');
  if(navMenu.classList.contains('active')){
    menuOverlay.style.opacity = '1';
    menuOverlay.style.visibility = 'visible';
    document.body.style.overflow = 'hidden';
  } else {
    menuOverlay.style.opacity = '0';
    menuOverlay.style.visibility = 'hidden';
    document.body.style.overflow = '';
  }
});

menuOverlay.addEventListener('click', () => {
  menuToggle.classList.remove('active');
  navMenu.classList.remove('active');
  menuOverlay.style.opacity = '0';
  menuOverlay.style.visibility = 'hidden';
  document.body.style.overflow = '';
});

// Logo tap: scroll back to top (hero) and close menu if open
const logoLink = document.getElementById('logoLink');
if (logoLink) {
  logoLink.addEventListener('click', (e) => {
    e.preventDefault();
    // Close mobile menu if open
    if (menuToggle && navMenu && menuOverlay) {
      menuToggle.classList.remove('active');
      navMenu.classList.remove('active');
      menuOverlay.style.opacity = '0';
      menuOverlay.style.visibility = 'hidden';
      document.body.style.overflow = '';
    }

    const hero = document.getElementById('hero');
    if (hero && hero.scrollIntoView) {
      hero.scrollIntoView({ behavior: 'smooth', block: 'start' });
    } else {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  });
}

navMenu.querySelectorAll('a').forEach(link => {
  link.addEventListener('click', () => {
    menuToggle.classList.remove('active');
    navMenu.classList.remove('active');
    menuOverlay.style.opacity = '0';
    menuOverlay.style.visibility = 'hidden';
    document.body.style.overflow = '';
  });
});

// Ensure the distribution CTA always opens the user's mail app
// (capture-phase so it wins over any future click handlers)
const requestDistributionBtn = document.getElementById('requestDistributionBtn');
if (requestDistributionBtn && requestDistributionBtn instanceof HTMLAnchorElement) {
  requestDistributionBtn.addEventListener('click', (e) => {
    e.preventDefault();
    e.stopPropagation();
    // Force navigation to mailto (some environments ignore default navigation)
    window.location.href = requestDistributionBtn.href;
  }, true);
}

// GELATO DRIPPING EFFECT WITH CUSTOM COLORS
 // Mobile-only: removed mousemove-driven dripping effect.

// CUSTOMIZER MODAL LOGIC
const customizerModal = document.getElementById('customizerModal');
const customizerClose = document.getElementById('customizerClose');

customizerClose.addEventListener('click', closeCustomizer);
customizerModal.addEventListener('click', (e) => {
  if (e.target === customizerModal) {
    closeCustomizer();
  }
});

function closeCustomizer() {
  customizerModal.classList.remove('active');
  document.body.style.overflow = '';
}

// Flavor selection
document.querySelectorAll('#flavor1Options .flavor-option').forEach(option => {
  option.addEventListener('click', () => {
    document.querySelectorAll('#flavor1Options .flavor-option').forEach(o => o.classList.remove('selected'));
    option.classList.add('selected');
    selectedFlavor1 = {
      color: option.dataset.color,
      stroke: option.dataset.stroke
    };
    updateCursorPreview();
  });
});

document.querySelectorAll('#flavor2Options .flavor-option').forEach(option => {
  option.addEventListener('click', () => {
    document.querySelectorAll('#flavor2Options .flavor-option').forEach(o => o.classList.remove('selected'));
    option.classList.add('selected');
    selectedFlavor2 = {
      color: option.dataset.color,
      stroke: option.dataset.stroke
    };
    updateCursorPreview();
  });
});

// Set initial selection
document.querySelector('#flavor1Options .flavor-option[data-color="#3d2314"]').classList.add('selected');
document.querySelector('#flavor2Options .flavor-option[data-color="#f067a6"]').classList.add('selected');

function updateCursorPreview() {
  document.getElementById('preview-scoop1').setAttribute('fill', selectedFlavor1.color);
  document.getElementById('preview-scoop1').setAttribute('stroke', selectedFlavor1.stroke);
  document.getElementById('preview-scoop2').setAttribute('fill', selectedFlavor2.color);
  document.getElementById('preview-scoop2').setAttribute('stroke', selectedFlavor2.stroke);
}

document.addEventListener('DOMContentLoaded', () => {
  document.documentElement.classList.add('js');
    const scrollBanner = document.getElementById('scrollBanner');
    const bannerCurrent = document.getElementById('bannerCurrent');

  function buildSequenceElement(text) {
    const parts = String(text)
      .split('·')
      .map(s => s.trim())
      .filter(Boolean);

    const seq = document.createElement('div');
    seq.className = 'banner-ticker__sequence';

    parts.forEach((part, idx) => {
      const item = document.createElement('span');
      item.className = 'banner-item';
      item.textContent = part;
      seq.appendChild(item);

      // add separator after each item (including the last) to keep the loop seamless
      const sep = document.createElement('span');
      sep.className = 'banner-sep';
      sep.textContent = '·';
      seq.appendChild(sep);
    });

    return seq;
  }

  function setTickerText(text) {
    if (!bannerCurrent) return;
    const nextText = String(text ?? '').trim();
    if (!nextText) return;

    if (bannerCurrent.dataset.tickerText === nextText) return;
    bannerCurrent.dataset.tickerText = nextText;

    bannerCurrent.setAttribute('aria-label', nextText);
    bannerCurrent.textContent = '';

    const viewport = document.createElement('div');
    viewport.className = 'banner-ticker__viewport';
    const track = document.createElement('div');
    track.className = 'banner-ticker__track';
    viewport.appendChild(track);
    bannerCurrent.appendChild(viewport);

    const seq = buildSequenceElement(nextText);
    track.appendChild(seq);

    // Duplicate enough times to avoid visible gaps.
    // We animate by -50%, so we want the track to contain two identical halves.
    // We'll build a second identical half, then extend further if needed.
    const seq2 = seq.cloneNode(true);
    seq2.setAttribute('aria-hidden', 'true');
    track.appendChild(seq2);

    // Ensure track is wide enough (especially on large screens / short text)
    requestAnimationFrame(() => {
      const minWidth = viewport.clientWidth * 2;
      while (track.scrollWidth < minWidth) {
        const extra = seq.cloneNode(true);
        extra.setAttribute('aria-hidden', 'true');
        track.appendChild(extra);
      }

      // Force the "two halves" behavior for the -50% animation by setting a fixed width
      // equal to half the content (first two sequences) times 2.
      // If we appended extras, the animation still looks continuous.
    });
  }

    const sections = Array.from(document.querySelectorAll('[data-section]'));
    const sectionData = sections.map(sec => ({ 
        element: document.getElementById(sec.dataset.section), 
        text: sec.dataset.text 
    }));

    let ticking = false;

    function updateBanner() {
        const headerWrapper = document.querySelector('.header-wrapper');
        if (!headerWrapper) return;
        const triggerPoint = headerWrapper.getBoundingClientRect().bottom;

        let currentIdx = -1;

        for (let i = sectionData.length - 1; i >= 0; i--) {
            const el = sectionData[i].element;
            if (el) {
                const sectionTop = el.getBoundingClientRect().top;
                if (sectionTop <= triggerPoint) {
                    currentIdx = i;
                    break;
                }
            }
        }

        const next = (currentIdx >= 0 && sectionData[currentIdx]) ? sectionData[currentIdx].text : sectionData[0].text;
        setTickerText(next);

        ticking = false;
    }

    window.addEventListener('scroll', () => {
        if (!ticking) {
            window.requestAnimationFrame(updateBanner);
            ticking = true;
        }
    });

    window.addEventListener('resize', updateBanner);

    // Mobile: story timeline "compact" (clamped text) + tap-to-expand.
    // Keeps the cards short (less vertical space) and still readable on demand.
    (function setupStoryTimelineExpand(){
      const isMobile = window.matchMedia('(max-width: 900px)').matches;
      if (!isMobile) return;

      const timeline = document.querySelector('#story .story-timeline');
      if (!timeline) return;

      const items = Array.from(timeline.querySelectorAll('.timeline-item'));
      if (!items.length) return;

      // Make items focusable for keyboard users (and future-proof for non-touch).
      items.forEach((item) => {
        item.setAttribute('tabindex', '0');
        item.setAttribute('role', 'button');
        item.setAttribute('aria-expanded', item.classList.contains('is-open') ? 'true' : 'false');
      });

      let isDragging = false;
      let startX = 0;
      let startY = 0;

      timeline.addEventListener('pointerdown', (e) => {
        isDragging = false;
        startX = e.clientX;
        startY = e.clientY;
      }, { passive: true });

      timeline.addEventListener('pointermove', (e) => {
        if (isDragging) return;
        const dx = Math.abs(e.clientX - startX);
        const dy = Math.abs(e.clientY - startY);
        if (dx > 10 || dy > 10) isDragging = true;
      }, { passive: true });

      function toggleItem(item){
        // Close others to keep the section compact
        items.forEach((it) => {
          if (it !== item) {
            it.classList.remove('is-open');
            it.setAttribute('aria-expanded', 'false');
          }
        });
        const willOpen = !item.classList.contains('is-open');
        item.classList.toggle('is-open', willOpen);
        item.setAttribute('aria-expanded', willOpen ? 'true' : 'false');
      }

      timeline.addEventListener('click', (e) => {
        if (isDragging) return;
        const item = e.target && e.target.closest ? e.target.closest('.timeline-item') : null;
        if (!item) return;
        toggleItem(item);
      });

      timeline.addEventListener('keydown', (e) => {
        const key = e.key;
        if (key !== 'Enter' && key !== ' ') return;
        const item = e.target && e.target.closest ? e.target.closest('.timeline-item') : null;
        if (!item) return;
        e.preventDefault();
        toggleItem(item);
      });
    })();

    // Mission/Vision tab switcher
    (function setupMVTabs(){
      const container = document.querySelector('.mission-vision');
      if (!container) return;
      const tabs = container.querySelectorAll('.mv-tab');
      const missionBox = container.querySelector('.mission-box');
      const visionBox = container.querySelector('.vision-box');
      if (!tabs.length || !missionBox || !visionBox) return;

      tabs.forEach(tab => {
        tab.addEventListener('click', () => {
          tabs.forEach(t => { t.classList.remove('is-active'); t.setAttribute('aria-selected', 'false'); });
          tab.classList.add('is-active');
          tab.setAttribute('aria-selected', 'true');
          const target = tab.dataset.target;
          missionBox.classList.toggle('is-active', target === 'mission-box');
          visionBox.classList.toggle('is-active', target === 'vision-box');
        });
      });
    })();

    // Global Presence interactive zoom
    (function setupGlobalPresence(){
      const section = document.querySelector('.global-presence');
      if (!section) return;

      const scroller = section.querySelector('.global-presence-bg');
      if (!scroller) return;
      
      function centerScroller(){
        const max = scroller.scrollWidth - scroller.clientWidth;
        if (max > 0) scroller.scrollLeft = max / 2;
      }

      // Avoid toggling while the user is swiping/dragging
      let moved = false;
      let startX = 0;
      let startY = 0;

      scroller.addEventListener('pointerdown', (e) => {
        moved = false;
        startX = e.clientX;
        startY = e.clientY;
      }, { passive: true });

      scroller.addEventListener('pointermove', (e) => {
        if (moved) return;
        const dx = Math.abs(e.clientX - startX);
        const dy = Math.abs(e.clientY - startY);
        if (dx > 10 || dy > 10) moved = true;
      }, { passive: true });

      // Tap/click toggles expanded state (mobile requirement)
      section.addEventListener('click', (e) => {
        if (moved) return;

        section.classList.toggle('is-expanded');
        const expanded = section.classList.contains('is-expanded');

        // Cursor affordance only where it makes sense (mouse)
        section.style.cursor = expanded ? 'grab' : '';

        if (expanded) {
          // Give layout a tick so scrollWidth is correct
          requestAnimationFrame(centerScroller);
        } else {
          // Reset scroll so the collapsed centered crop is stable
          scroller.scrollLeft = 0;
        }
      });

      // Desktop: mouse drag to pan horizontally when expanded
      let isDragging = false;
      let dragStartX = 0;
      let dragStartScrollLeft = 0;

      scroller.addEventListener('pointerdown', (e) => {
        if (!section.classList.contains('is-expanded')) return;
        if (e.pointerType !== 'mouse') return;
        isDragging = true;
        dragStartX = e.clientX;
        dragStartScrollLeft = scroller.scrollLeft;
        scroller.setPointerCapture && scroller.setPointerCapture(e.pointerId);
        section.style.cursor = 'grabbing';
        e.preventDefault();
      });

      scroller.addEventListener('pointermove', (e) => {
        if (!isDragging) return;
        const dx = e.clientX - dragStartX;
        scroller.scrollLeft = dragStartScrollLeft - (dx * 1.6);
      });

      scroller.addEventListener('pointerup', () => {
        if (!isDragging) return;
        isDragging = false;
        if (section.classList.contains('is-expanded')) section.style.cursor = 'grab';
      });

      scroller.addEventListener('pointercancel', () => {
        if (!isDragging) return;
        isDragging = false;
        if (section.classList.contains('is-expanded')) section.style.cursor = 'grab';
      });
    })();

    // Mobile: Gallery lightbox (tap opens a full, un-cropped image + nice text transition)
    (function setupGalleryLightbox(){
      const isMobile = window.matchMedia && (
        window.matchMedia('(hover: none) and (pointer: coarse)').matches ||
        window.matchMedia('(max-width: 900px)').matches
      );
      if (!isMobile) return;

      const section = document.querySelector('#gallery.gallery');
      const grid = document.querySelector('#gallery .gallery-grid');
      if (!grid) return;

      const items = Array.from(grid.querySelectorAll('.gallery-item'));
      if (!items.length) return;

      // Build lightbox once
      const lightbox = document.createElement('div');
      lightbox.className = 'gallery-lightbox';
      lightbox.setAttribute('role', 'dialog');
      lightbox.setAttribute('aria-modal', 'true');
      lightbox.setAttribute('aria-label', 'Image preview');
      lightbox.innerHTML =
        '<div class="gallery-lightbox-backdrop" aria-hidden="true"></div>' +
        '<div class="gallery-lightbox-inner">' +
          '<button class="gallery-lightbox-close" type="button" aria-label="Close">&times;</button>' +
          '<div class="gallery-lightbox-imgwrap">' +
            '<img class="gallery-lightbox-img" alt="" />' +
          '</div>' +
          '<div class="gallery-lightbox-caption" aria-hidden="true"></div>' +
        '</div>';
      document.body.appendChild(lightbox);

      const lbImg = lightbox.querySelector('.gallery-lightbox-img');
      const lbCaption = lightbox.querySelector('.gallery-lightbox-caption');
      const lbClose = lightbox.querySelector('.gallery-lightbox-close');

      // Accessibility + focus
      items.forEach((item) => {
        item.setAttribute('tabindex', '0');
        item.setAttribute('role', 'button');
        item.setAttribute('aria-haspopup', 'dialog');
      });

      let prevOverflow = '';
      let lastActive = null;

      function anyOtherModalOpen(){
        const specs = document.getElementById('specsOverlay');
        const specsOpen = !!(specs && specs.classList.contains('active'));
        const customOpen = !!(customizerModal && customizerModal.classList.contains('active'));
        return specsOpen || customOpen;
      }

      function openLightbox(fromItem){
        const img = fromItem && fromItem.querySelector ? fromItem.querySelector('img') : null;
        if (!img) return;

        const src = img.currentSrc || img.src;
        const alt = img.alt || '';

        lastActive = fromItem;
        lbImg.src = src;
        lbImg.alt = alt;
        lbCaption.textContent = alt;
        lbCaption.style.display = alt ? '' : 'none';

        prevOverflow = document.body.style.overflow;
        document.body.style.overflow = 'hidden';
        document.body.classList.add('gallery-lightbox-open');
        if (section) section.classList.add('is-lightbox-open');
        lightbox.classList.add('active');

        // focus close for quick dismissal
        lbClose && lbClose.focus && lbClose.focus();
      }

      function closeLightbox(){
        if (!lightbox.classList.contains('active')) return;
        lightbox.classList.remove('active');
        document.body.classList.remove('gallery-lightbox-open');
        if (section) section.classList.remove('is-lightbox-open');

        // restore scroll only if nothing else is open
        if (!anyOtherModalOpen()) {
          document.body.style.overflow = prevOverflow || '';
        }

        // give focus back
        if (lastActive && lastActive.focus) lastActive.focus();
        lastActive = null;
      }

      // Click on item => open
      let isDragging = false;
      let startX = 0;
      let startY = 0;
      grid.addEventListener('pointerdown', (e) => {
        isDragging = false;
        startX = e.clientX;
        startY = e.clientY;
      }, { passive: true });
      grid.addEventListener('pointermove', (e) => {
        if (isDragging) return;
        const dx = Math.abs(e.clientX - startX);
        const dy = Math.abs(e.clientY - startY);
        if (dx > 10 || dy > 10) isDragging = true;
      }, { passive: true });

      grid.addEventListener('click', (e) => {
        if (isDragging) return;
        const item = e.target && e.target.closest ? e.target.closest('.gallery-item') : null;
        if (!item) return;
        openLightbox(item);
      });

      grid.addEventListener('keydown', (e) => {
        const key = e.key;
        if (key !== 'Enter' && key !== ' ') return;
        const item = e.target && e.target.closest ? e.target.closest('.gallery-item') : null;
        if (!item) return;
        e.preventDefault();
        openLightbox(item);
      });

      // Close interactions
      lbClose && lbClose.addEventListener('click', (e) => {
        e.preventDefault();
        closeLightbox();
      });

      lightbox.addEventListener('click', (e) => {
        // Clicking outside the inner card closes
        const inner = e.target && e.target.closest ? e.target.closest('.gallery-lightbox-inner') : null;
        if (inner) return;
        closeLightbox();
      });

      document.addEventListener('keydown', (e) => {
        if (e.key !== 'Escape') return;
        closeLightbox();
      });

      // Swipe down to close (nice on mobile)
      let swStartY = 0;
      let swStartX = 0;
      lightbox.addEventListener('pointerdown', (e) => {
        if (!lightbox.classList.contains('active')) return;
        swStartY = e.clientY;
        swStartX = e.clientX;
      }, { passive: true });
      lightbox.addEventListener('pointerup', (e) => {
        if (!lightbox.classList.contains('active')) return;
        const dy = e.clientY - swStartY;
        const dx = Math.abs(e.clientX - swStartX);
        if (dy > 70 && dx < 60) closeLightbox();
      }, { passive: true });
    })();

    // Mobile: auto-zoom product cards while scrolling (when cards are in view)
    (function setupProductCardsInViewZoom(){
      const reduceMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (reduceMotion) return;

      const isMobile = window.matchMedia && (
        window.matchMedia('(hover: none) and (pointer: coarse)').matches ||
        window.matchMedia('(max-width: 900px)').matches
      );
      if (!isMobile) return;
      if (!('IntersectionObserver' in window)) return;

      const cards = Array.from(document.querySelectorAll('#products .card'));
      if (!cards.length) return;

      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          entry.target.classList.toggle('is-inview', entry.isIntersecting);
        });
      }, {
        threshold: 0.65
      });

      cards.forEach((card) => observer.observe(card));
    })();

    updateBanner(); 
});
</script>

<script>
  // Convert any <img> inside .card-img into a background-image on the container
  // DISABLED: keeping img elements in DOM to allow CSS hover animations
  (function(){
    function convertCardImages(){
      document.querySelectorAll('.card-img').forEach(function(container){
        var img = container.querySelector('img');
        if(img && img.src){
          container.style.backgroundImage = "url('" + img.src + "')";
          container.style.backgroundSize = 'cover';
          container.style.backgroundPosition = 'center center';
          container.style.backgroundRepeat = 'no-repeat';
          // REMOVED: do not remove img element; keep it for CSS animations
          // img.parentNode && img.parentNode.removeChild(img);
        }
      });
    }
    // DISABLED: comment out conversion to keep img elements in DOM
    // if(document.readyState === 'loading'){
    //   document.addEventListener('DOMContentLoaded', convertCardImages);
    // } else {
    //   convertCardImages();
    // }
  })();

  // Hero tap-to-scroll functionality
  (function(){
    const hero = document.querySelector('.hero');
    if(!hero) return;
    const heroBg = hero.querySelector('.hero-bg');
    const heroContent = hero.querySelector('.hero-content');
    if(!heroBg) return;

    // Add hint element
    const hint = document.createElement('div');
    hint.className = 'hero-scroll-hint';
    hint.textContent = '← Scorri per vedere tutto →';
    hero.appendChild(hint);

    let isScrollMode = false;

    // Tap on hero (but not on CTA button) to toggle scroll mode
    hero.addEventListener('click', function(e){
      // If clicking the CTA button, let it work normally
      if(e.target.closest('.hero-cta')) return;
      
      // Toggle scroll mode
      isScrollMode = !isScrollMode;
      hero.classList.toggle('scroll-mode', isScrollMode);
      if(isScrollMode){
        heroBg.scrollLeft = heroBg.scrollWidth / 4; // Start centered
      }
    });

    // Prevent scrolling from bubbling and toggling mode
    heroBg.addEventListener('scroll', function(e){
      e.stopPropagation();
    });
  })();
</script>

</body>
</html>